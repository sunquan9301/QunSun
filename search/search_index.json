{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Quan Sun I am currently a Senior Engineer(P7) in Youku Department of Alibaba . I obtained my master degree in the School of Computer Science at Nanjing University (07.2017) . I have one year experience as Non Full - Time Employee in Ant Financial of Alibaba (06.2016 - 09.2016) and ByteDance (10.2016 - 07.2017). After graduation, I have worked for Bytedance , Start-Up company and Alibaba . Specifically, I favor the following perspectives for technologies. Basic Computer Knowledge\uff1a Mathmatics Data Structure Algorithms Coding Languages\uff1a Java Kotlin C++ Dart Python Application Platforms\uff1a Linux Android Cross-Platform Research Fields\uff1a Computer Vision OpenCV OpenGL Machine Learing You can find more Information through my Resume . News [New] \u6df1\u5165\u7406\u89e3Awk 2021.7.13 [New] \u6df1\u5165\u7406\u89e3Vim 2021.7.13 [New] \u6df1\u5165\u7406\u89e3Shell\u811a\u672c 2021.7.11 [New] 1.Camera\u7406\u8bba\u77e5\u8bc6\u548c\u57fa\u672c\u539f\u7406 2021.7.7 Blog You can browse my articles directly. ==> Contacts GitHub Email CSDN","title":"Home"},{"location":"#quan-sun","text":"I am currently a Senior Engineer(P7) in Youku Department of Alibaba . I obtained my master degree in the School of Computer Science at Nanjing University (07.2017) . I have one year experience as Non Full - Time Employee in Ant Financial of Alibaba (06.2016 - 09.2016) and ByteDance (10.2016 - 07.2017). After graduation, I have worked for Bytedance , Start-Up company and Alibaba . Specifically, I favor the following perspectives for technologies. Basic Computer Knowledge\uff1a Mathmatics Data Structure Algorithms Coding Languages\uff1a Java Kotlin C++ Dart Python Application Platforms\uff1a Linux Android Cross-Platform Research Fields\uff1a Computer Vision OpenCV OpenGL Machine Learing You can find more Information through my Resume .","title":"Quan Sun"},{"location":"#news","text":"[New] \u6df1\u5165\u7406\u89e3Awk 2021.7.13 [New] \u6df1\u5165\u7406\u89e3Vim 2021.7.13 [New] \u6df1\u5165\u7406\u89e3Shell\u811a\u672c 2021.7.11 [New] 1.Camera\u7406\u8bba\u77e5\u8bc6\u548c\u57fa\u672c\u539f\u7406 2021.7.7","title":"News"},{"location":"#blog","text":"You can browse my articles directly. ==>","title":"Blog"},{"location":"#contacts","text":"GitHub Email CSDN","title":"Contacts"},{"location":"blog/","text":"My Blogs \u672c\u7bc7\u4e3a\u6587\u7ae0\u6c47\u603b\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u5f88\u5feb\u7684\u53d1\u73b0\u4f60\u60f3\u8981\u7684\u5185\u5bb9\u3002 Linux \u6df1\u5165\u7406\u89e3Awk 2021.7.13 \u6df1\u5165\u7406\u89e3Vim 2021.7.13 \u6df1\u5165\u7406\u89e3Shell\u811a\u672c 2021.7.11 Android Android Camera 1.Camera\u7406\u8bba\u77e5\u8bc6\u548c\u57fa\u672c\u539f\u7406 2021.7.7","title":"\u6587\u7ae0\u6c47\u603b"},{"location":"blog/#my-blogs","text":"\u672c\u7bc7\u4e3a\u6587\u7ae0\u6c47\u603b\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u5f88\u5feb\u7684\u53d1\u73b0\u4f60\u60f3\u8981\u7684\u5185\u5bb9\u3002","title":"My Blogs"},{"location":"blog/#linux","text":"\u6df1\u5165\u7406\u89e3Awk 2021.7.13 \u6df1\u5165\u7406\u89e3Vim 2021.7.13 \u6df1\u5165\u7406\u89e3Shell\u811a\u672c 2021.7.11","title":"Linux"},{"location":"blog/#android","text":"","title":"Android"},{"location":"blog/#android-camera","text":"1.Camera\u7406\u8bba\u77e5\u8bc6\u548c\u57fa\u672c\u539f\u7406 2021.7.7","title":"Android Camera"},{"location":"android/camera/camera_1/","text":"1.Camera\u7406\u8bba\u77e5\u8bc6\u548c\u57fa\u672c\u539f\u7406 1. \u524d\u8a00 \u672c\u7bc7\u6587\u7ae0\u4e3aCamera\u7cfb\u5217\u6587\u7ae0\u7684\u7b2c\u4e00\u7bc7\uff0c\u4e3b\u8981\u9610\u8ff0Camera\u6444\u50cf\u5934\u7684 \u57fa\u7840\u7406\u8bba\u77e5\u8bc6 \uff0c\u89e3\u51b3Camera\u786c\u4ef6\u6216Camera\u8f6f\u4ef6\u5f00\u53d1\u7684\u4e00\u4e9b\u56f0\u60d1\u3002\u8be5\u7cfb\u5217\u6587\u7ae0\u4e3b\u8981\u56f4\u7ed5Android\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\uff0c\u5e76\u6d89\u53caAndroid\u7cfb\u7edf\u4e0aCamera\u7684\u534f\u8bae\u3001\u5b9e\u73b0\u548c\u5e94\u7528\u3002 \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002\u53ef\u79c1\u4fe1\u3001\u4e5f\u53ef\u90ae\u4ef6\u3001\u8054\u7cfb\u65b9\u5f0f\u89c1\u6587\u7ae0\u672b\u5c3e 2. Basic Concepts \u672f\u8bed \u89e3\u91ca \u5907\u6ce8 Camera an optical instrument that captures a visual image. \u5149\u5b66\u4eea\u5668\u6355\u83b7\u89c6\u89c9\u5f62\u8c61\u663e\u793a\u5728\u611f\u5149\u8868\u9762 Image sensor detects and conveys information used to make an image. \u4e24\u79cd\u4e3b\u6d41\u4f20\u611f\u5668\u4e3a CCD \u548c CMOS CCD charge-coupled device \u7535\u8377\u8026\u5408 CMOS Complementary Metal-Oxide Semiconductor \u4e92\u8865\u6027\u6c27\u5316\u91d1\u5c5e\u534a\u5bfc\u4f53 pixel \u50cf\u7d20 \u76f8\u673a\u4f20\u611f\u5668\u4e0a\u7684\u6700\u5c0f\u611f\u5149\u5355\u4f4d IR Filter \u7ea2\u5916\u6ee4\u5149\u7247 \u4eba\u773c\u770b\u4e0d\u5230\u7ea2\u5916\u5149\uff0c\u4f46sensor\u53ef\uff0c\u9700\u5c06\u7ea2\u5916\u5149\u6ee4\u6389\u4f7f\u56fe\u50cf\u66f4\u63a5\u8fd1\u4eba\u773c\u770b\u5230\u6548\u679c\u3002 Lens \u955c\u5934 \u5206\u4e3a\u5851\u80f6\u900f\u955c(plastic)\u6216\u73bb\u7483\u900f\u955c(glass) DSP Digital signal processor, \u5c31\u662f\u628aRaw RGB\u683c\u5f0f\u8f6c\u6362\u6210RGB\u683c\u5f0f\u6216\u8005\u662fYUV\u683c\u5f0f ISP Image signal processor, \u628a sensor \u91c7\u96c6\u5230\u7684\u539f\u59cb\u6570\u636e\u8f6c\u6362\u4e3a\u663e\u793a\u652f\u6301 \u7684\u683c\u5f0f 3A\u7b97\u6cd5 AF\u3001AE\u3001AWB \u81ea\u52a8\u5bf9\u7126\u3001\u81ea\u52a8\u66dd\u5149\u3001\u81ea\u52a8\u767d\u5e73\u8861 A/D\u8f6c\u6362 analog signals to digital format 3. \u603b\u4f53\u6d41\u7a0b \u6d89\u53ca\u5982\u4e0b\u51e0\u4e2a\u6b65\u9aa4 \u5149\u7ebf\u901a\u8fc7\u955c\u5934Lens\u8fdb\u5165\u6444\u50cf\u5934\u5185\u90e8\u3002 \u56fe\u50cf\u4f20\u611f\u5668\u8f6c\u6362\u5149\u4fe1\u606f\u4e3a\u7535\u4fe1\u606f \u539f\u59cb\u7684RAW Data\u7ecf\u8fc7DSP\u8f6c\u6362\u6210RGB/YUV\u6570\u636e RGB/YUV\u901a\u8fc7\u5e94\u7528\u5c42\u5c55\u73b0 4. \u6444\u50cf\u5934 \u6444\u50cf\u5934\u7684\u901a\u7528\u786c\u4ef6\u7ed3\u6784\u5982\u4e0a\u56fe\u6240\u793a\u3002\u5229\u7528\u900f\u955c\u6298\u5c04\u539f\u7406\uff0c\u666f\u7269\u5149\u7ebf\u900f\u8fc7\u955c\u5934\u5728\u805a\u7126\u5e73\u9762\u4e0a\u5f62\u6210\u6e05\u6670\u7684\u50cf\uff0c\u7136\u540e\u901a\u8fc7\u611f\u5149\u6750\u6599CMOS\u6216CCD\u8bb0\u5f55\u5f71\u50cf\uff0c\u5e76\u901a\u8fc7\u7535\u8def\u8f6c\u6362\u4e3a\u7535\u4fe1\u53f7\u3002 1 Lens\u4e00\u822c\u662f\u6709\u51e0\u7247\u900f\u955c\u7ec4\u6210\uff0c\u6309\u6750\u8d28\u53ef\u5206\u4e3a Plastic \uff1a\u5851\u80f6\u900f\u955c Glass \uff1a\u73bb\u7483\u900f\u955c Glass\u6bd4Plastic\u8d35\u3002\u5728\u900f\u5149\u7387\u548c\u611f\u5149\u6027\u7b49\u5149\u5b66\u6307\u6807\u4e0a\u4e5f\u6bd4Plastic\u8981\u597d\u3002\u624b\u673a\u8003\u8651\u5230\u6210\u672c\uff0c\u4e00\u822c\u4f7f\u7528\u7684\u662fPlastic\u3002 \u7ed3\u5408\u4ee5\u4e0a2\u79cd\u7ed3\u6784\uff0c\u6444\u50cf\u5934\u91c7\u7528\u7684\u955c\u5934\u7ed3\u6784\u6709\uff1a1P\u30012P\u30011G1P\u30011G2P\u30012G2P\u30012G3P\u30014G\u30015G\u7b49\u3002\u900f\u955c\u8d8a\u591a\uff0c\u6210\u672c\u8d8a\u9ad8\uff0c\u76f8\u5bf9\u6210\u50cf\u6548\u679c\u4f1a\u66f4\u51fa\u8272\u3002 5. \u4f20\u611f\u5668 Sensor \u8d1f\u8d23\u5c06Lens\u7684\u5149\u4fe1\u53f7\u8f6c\u6362\u4e3a\u7535\u4fe1\u53f7\uff0c\u518d\u8fdb\u8fc7\u5185\u90e8AD\u8f6c\u6362\u4e3a\u6570\u5b57\u4fe1\u53f7\u3002 \u7531\u4e8e Sensor \u7684\u6bcf\u4e2a pixel \u53ea\u80fd\u611f\u5149 R \u5149\u6216 B \u5149\u6216 G \u5149\uff0c\u56e0\u6b64\u6bcf\u4e2a\u50cf\u7d20\u6b64\u65f6\u5b58\u8d2e\u7684\u662f\u5355\u8272\u7684\uff0c\u79f0\u4e4b\u4e3a RAW DATA \u6570\u636e\u3002 \u60f3\u5c06\u6bcf\u4e2a\u50cf\u7d20\u7684 RAW DATA \u6570\u636e\u8fd8\u539f\u6210\u4e09\u57fa\u8272\uff0c\u5c31\u9700\u8981 ISP \u6765\u5904\u7406\u3002 \u76ee\u524d\u5e38\u7528Sensor\u4e3b\u8981\u6709 CCD \u548c CMOS \uff1a 5.1 CCD\uff08Charge Coupled Device) \u7535\u8377\u8026\u5408\u5668\u4ef6\u4f20\u611f\u5668 \u9ad8\u611f\u5149\u5ea6\u534a\u5bfc\u4f53\u6750\u6599\u5236\u6210\uff0c\u7531\u8bb8\u591a\u611f\u5149\u5355\u4f4d\u7ec4\u6210\uff0c\u901a\u5e38\u4ee5\u767e\u4e07\u50cf\u7d20\u4e3a\u5355\u4f4d\u3002 \u5f53CCD\u8868\u9762\u53d7\u5230\u5149\u7ebf\u7167\u5c04\u65f6\uff0c\u6bcf\u4e2a\u611f\u5149\u5355\u4f4d\u4f1a\u5c06\u7535\u8377\u53cd\u6620\u5728\u7ec4\u4ef6\u4e0a\uff0c\u6240\u6709\u7684\u611f\u5149\u5355\u4f4d\u6240\u4ea7\u751f\u7684\u4fe1\u53f7\u52a0\u5728\u4e00\u8d77\uff0c\u5c31\u6784\u6210\u4e86\u4e00\u5e45\u5b8c\u6574\u7684\u753b\u9762\u3002 5.2 CMOS\uff08Complementary Metal-Oxide Semiconductor\uff09\u4e92\u8865\u6027\u6c27\u5316\u91d1\u5c5e\u534a\u5bfc\u4f53 \u7845\u548c\u9517\u505a\u6210\u7684\u534a\u5bfc\u4f53\uff0c\u4f7f\u5176\u5728CMOS\u4e0a\u5171\u5b58\u7740\u5e26N(-)\u548cP(+)\u7ea7\u7684\u534a\u5bfc\u4f53\uff0c\u8fd9\u4e24\u4e2a\u4e92\u8865\u6548\u5e94\u6240\u4ea7\u751f\u7684\u7535\u6d41\u53ef\u4ee5\u88ab\u5904\u7406\u82af\u7247\u8bb0\u5f55\u5e76\u89e3\u8bfb\u6210\u5f71\u50cf\u3002 CMOS\u4f20\u611f\u5668\u4e3b\u8981\u4ee5\u7f8e\u56fd\u3001\u97e9\u56fd\u548c\u4e2d\u56fd\u53f0\u6e7e\u4e3a\u4e3b\u5bfc\uff0c\u4e3b\u8981\u751f\u4ea7\u5382\u5bb6\u662f\u7f8e\u56fd\u7684OmnVison\u3001Agilent\u3001Micron\uff0c\u4e2d\u56fd\u53f0\u6e7e\u7684\u9510\u50cf\u3001\u539f\u76f8\u3001\u6cf0\u89c6\u7b49\uff0c\u97e9\u56fd\u7684\u4e09\u661f\u3001\u73b0\u4ee3\u3002 5.3 CCD VS CMOS 5.3.1 CCD\u7279\u70b9 \u6280\u672f\u6210\u719f\u3001\u6210\u50cf\u8d28\u91cf\u9ad8\u3001\u7075\u654f\u5ea6\u9ad8\uff0c\u566a\u58f0\u4f4e\uff0c\u54cd\u5e94\u901f\u5ea6\u5feb\uff0c\u6709\u81ea\u626b\u63cf\u529f\u80fd\uff0c\u56fe\u50cf\u7578\u53d8\u5c0f\uff0c\u65e0\u6b8b\u50cf\u3001\u5e94\u7528\u8d85\u5927\u89c4\u6a21\u96c6\u6210\u7535\u8def\u5de5\u827a\u6280\u672f\u751f\u4ea7\uff0c\u50cf\u7d20\u96c6\u6210\u5ea6\u9ad8\uff0c\u5c3a\u5bf8\u7cbe\u786e 5.3.2 CMOS\u7279\u70b9 \u8bfb\u53d6\u4fe1\u606f\u7684\u65b9\u5f0f\u7b80\u5355\u3001\u8f93\u51fa\u4fe1\u606f\u901f\u7387\u5feb\u3001\u8017\u7535\u7701\uff08\u4ec5\u4e3aCCD\u82af\u7247\u76841/10\u5de6\u53f3\uff09\u3001\u4f53\u79ef\u5c0f\u3001\u91cd\u91cf\u8f7b\u3001\u96c6\u6210\u5ea6\u9ad8\u3001\u4ef7\u683c\u4f4e\u7b49\u7279\u70b9\u3002 5.3.3 \u7279\u70b9\u5206\u6790 \u5982\u56fe-CCD\u548cCMOS\u7684\u611f\u5149\u4e8c\u6781\u7ba1\u6392\u5217\u3002 CCD\u9635\u5217\uff0c\u662f\u5728\u4ec5\u6709\u4e00\u6761\u603b\u7ebf\u540e\u52a0A/D\u8f6c\u6362(\u7d2b\u8272\u7bad\u5934\uff0c\u89c12. Basic Concept)\u3002\u5728\u65f6\u949f\u4fe1\u53f7\u540c\u6b65\u4e0b\uff0c\u4e00\u6b65\u6b65\u79fb\u4f4d\u8bfb\u5bf9\u5e94\u4e8c\u6781\u7ba1\u7684\u7535\u5e73\u503c\u3002 CMOS\u9635\u5217\uff0c\u662f\u5728\u6bcf\u4e2a\u611f\u5149\u4e8c\u6781\u7ba1\u65c1\u90fd\u52a0\u5165\u4e86A/D\u8f6c\u6362\u3002 \u662f\u4e3b\u52a8\u5f0f\u8f93\u51fa\u91c7\u96c6\u7684\u6570\u636e\u4fe1\u606f \uff0c\u800c CCD \u662f\u5728\u540c\u6b65\u7535\u8def\u63a7\u5236\u4e0b \u88ab\u52a8\u5f0f\u7684\u8f93\u51fa\u91c7\u96c6\u7684\u6570\u636e\u3002 \u56e0\u6b64\u6211\u4eec\u8be6\u7ec6\u5728\u6027\u80fd\uff0c\u8017\u7535\uff0c\u753b\u8d28\u7b49\u65b9\u9762\u505a\u521d\u6b65\u6bd4\u8f83 \u6027\u80fd CCD\u9700\u5728\u540c\u6b65\u65f6\u949f\u63a7\u5236\u4e0b\u4ee5\u884c\u4e3a\u5355\u4f4d\u4e00\u4f4d\u4e00\u4f4d\u8f93\u51fa\u4fe1\u606f\uff0c\u901f\u5ea6\u5f53\u7136\u6162\u4e0d\u9002\u5408\u5feb\u901f\u8fde\u62cd\uff0c\u4fdd\u5b58\u56fe\u50cf\u901f\u5ea6\u6162\u3002 CMOS\u9635\u5217\u6709\u5750\u6807\u561b\uff0c\u4f20\u611f\u5668\u91c7\u96c6\u5149\u4fe1\u53f7\u7684\u540c\u65f6\u5c31\u53ef\u4ee5\u53d6\u51fa\u7535\u4fe1\u53f7\uff0c\u4fdd\u5b58\u56fe\u50cf\u901f\u5ea6\u5feb\u3002 \u8017\u7535 CCD\u8017\u7535\u5927\uff0c\u5728\u540c\u6b65\u4fe1\u53f7\u63a7\u5236\u4e0b\u4e00\u4f4d\u4f4d\u8bfb\u53d6\uff0c\u9700\u8981\u65f6\u949f\u63a7\u5236\u7535\u6e90\u548c\u4e09\u7ec4\u7535\u6e90\u4f9b\u7535\u3002 CMOS\u8017\u7535\u5c0f\u3002CMOS\u4f20\u611f\u5668\u7ecf\u5149\u7535\u8f6c\u6362\u540e\u76f4\u63a5\u4ea7\u751f\u7535\u6d41\u6216\u7535\u538b\u4fe1\u53f7\uff0c\u4fe1\u53f7\u8bfb\u53d6\u5341\u5206\u7b80\u5355\uff0c\u800c\u4e14\u611f\u5149\u4e8c\u6781\u7ba1\u6240\u9700\u7684\u7535\u538b\uff0c\u76f4\u63a5\u7531\u6676\u4f53\u653e\u5927\u8f93\u51fa\uff0c\u6240\u4ee5\u9700\u8981\u65bd\u52a0\u5728\u6e90\u6781\u7684\u7535\u5e73\u5f88\u5c0f \u753b\u8d28 CMOS\u662f\u4e3b\u52a8\u5f0f\u8f93\u51fa\u6570\u636e\uff0c\u9635\u5217\u4e0a\u6bcf\u4e2a\u70b9\u90fd\u8981\u7ecf\u8fc7\u4e24\u6761\u4f20\u8f93\u603b\u7ebf\uff0c\u8def\u7a0b\u957f\uff0c\u4f20\u8f93\u65f6\u7684\u566a\u58f0\u5f15\u5165\u591a\u3002 CMOS\u9635\u5217\u7684\u6bcf\u4e2a\u4e8c\u6781\u7ba1\u65c1\u8fb9\u90fd\u6709A/D\uff0c\u5149\u7535\u4f20\u611f\u5143\u4ef6\u4e0e\u7535\u8def\u4e4b\u95f4\u8ddd\u79bb\u5f88\u8fd1\uff0c\u76f8\u4e92\u4e4b\u95f4\u7684\u5149\u7535\u78c1\u5e72\u6270\u8f83\u4e3a\u4e25\u91cd\uff0c\u653e\u5927\u7684\u540c\u65f6\u53ef\u80fd\u5e26\u5165\u7684\u566a\u58f0\u4e5f\u5927\u3002 CMOS\u56e0\u4e3a\u4e8c\u6781\u7ba1\u65c1\u5e26\u6709A/D\u7535\u8def\uff0c\u540c\u6837\u5c3a\u5bf8\u7684sensor\uff0c\u4e8c\u6781\u7ba1\u80fd\u53d7\u5149\u7ebf\u9762\u79ef\u5c0f\uff0c\u4e00\u90e8\u5206\u5149\u7ebf\u88ab\u6d6a\u8d39\u4e86\uff0c\u53d7\u5149\u5f31\u4e8eCCD\u7684\u611f\u5149\u4e8c\u6781\u7ba1\uff0c\u5e26\u5165\u7684\u4e00\u70b9\u5c0f\u566a\u58f0\u5c31\u4f1a\u88ab\u653e\u5927\u3002 \u53d1\u5c55 CCD\u4f20\u611f\u5668\u5236\u4f5c\u6280\u672f\u8d77\u6b65\u8f83\u65e9\uff0c\u6280\u672f\u6bd4\u8f83\u6210\u719f\u3002\u8fd1\u5e74\u6765\uff0cCMOS\u6280\u672f\u53d1\u5c55\u4e00\u65e5\u5343\u91cc\uff0c\u5728\u4e2d\u5c0f\u5c3a\u5bf8\u4f20\u611f\u5668\u4e0a\uff0cCMOS\u548cCCD\u7684\u753b\u8d28\u533a\u522b\u5df2\u7ecf\u5f88\u5c0f\u3002 5.4 \u4f20\u611f\u5668\u5c3a\u5bf8\u548c\u753b\u8d28\u7684\u5173\u7cfb \u4f20\u611f\u5668\u5c3a\u5bf8\u5927\u5c0f\u5bf9\u4e8e\u753b\u8d28\u7684\u5f71\u54cd\uff0c\u5c31\u662f\u91c7\u96c6\u5149\u7ebf\u6570\u636e\u7684\u6b63\u786e\u6027\u548c\u5b8c\u6574\u6027\u7684\u4e0d\u540c\u3002** \u4f20\u611f\u5668\u9762\u79ef\u8d8a\u5927\uff0c\u611f\u5149\u9635\u5217\u9762\u79ef\u5c31\u8d8a\u5927\uff0c\u76f8\u90bb\u611f\u5149\u7535\u8def\u7684\u8ddd\u79bb\u5c31\u8d8a\u5927\uff0c\u52a0\u7535\u65f6\u4ea7\u751f\u7684\u7535\u78c1\u5e72\u6270\u5c31\u8d8a\u5c0f\u3002 \u4f20\u611f\u5668\u9762\u79ef\u8d8a\u5927\uff0c\u611f\u5149\u9635\u5217\u9762\u79ef\u5c31\u8d8a\u5927\uff0c\u5bf9\u5e94\u5355\u4e2a\u50cf\u7d20\u7684\u900f\u955c\u5c31\u80fd\u505a\u7684\u8d8a\u5927\uff0c\u805a\u96c6\u5230\u7684\u5149\u7ebf\u5c31\u8d8a\u591a\uff0c\u611f\u5149\u4e8c\u6781\u7ba1\u53d7\u5149\u540e\u4ea7\u751f\u7684\u8f93\u51fa\u7535\u5e73\u5c31\u8d8a\u9ad8\u3002\u5e26\u6765\u66f4\u9ad8\u7684\u4fe1\u566a\u6bd4\uff0c\u8f6c\u6362\u540e\u7684\u4fe1\u606f\u5904\u7406\u6b63\u786e\u7387\u5c31\u8d8a\u9ad8\u3002 \u4f20\u611f\u5668\u81ea\u5df1\u5c31\u603b\u7ed3\u5230\u8fd9\u91cc\uff0c\u5982\u679c\u611f\u5174\u8da3\u53ef\u67e5\u770b\u6ce8\u811a\u6216\u641c\u96c6\u66f4\u591a\u8d44\u6599\uff0c\u6df1\u5165\u63a2\u7a76\u3002 2 3 6. ISP and DSP \u7531\u4e8e\u672c\u4eba\u4e13\u4e1a\u77e5\u8bc6\u6709\u9650\uff0c\u4e0d\u6df1\u5165\u8fdb\u884c\u603b\u7ed3\u5206\u6790\uff0c\u611f\u5174\u8da3\u53ef\u53c2\u9605\u6570\u5b57\u4fe1\u53f7\u5904\u7406\u7b49\u76f8\u5173\u4e66\u7c4d 2 4 5 ISP \u5904\u7406Image Sensor\uff08\u56fe\u50cf\u4f20\u611f\u5668\uff09\u7684\u8f93\u51fa\u6570\u636e\uff0c\u5982AEC\uff08\u81ea\u52a8\u66dd\u5149\u63a7\u5236\uff09\u3001AGC\uff08\u81ea\u52a8\u589e\u76ca\u63a7\u5236\uff09\u3001AWB\uff08\u81ea\u52a8\u767d\u5e73\u8861\uff09\u3001\u8272\u5f69\u6821\u6b63\u3001Gamma\u6821\u6b63\u3001\u795b\u9664\u574f\u70b9\u3001Auto Black Level\u3001Auto White Level \u7b49\u7b49\u3002 DSP\u529f\u80fd\u8f83\u591a\uff0c\u5b83\u53ef\u4ee5\u505a\u4e9b\u62cd\u7167\u4ee5\u53ca\u56de\u663e\uff08JPEG\u7684\u7f16\u89e3\u7801\uff09\u3001\u5f55\u50cf\u4ee5\u53ca\u56de\u653e\uff08Video \u7684\u7f16\u89e3\u7801\uff09\u3001H.264\u7684\u7f16\u89e3\u7801\u3001\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u65b9\u9762\u7684\u5904\u7406\uff0c\u603b\u4e4b\u662f\u5904\u7406\u6570\u5b57\u4fe1\u53f7\u4e86\u3002 \u53ef\u4ee5\u8ba4\u4e3aISP\u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u5904\u7406\u56fe\u50cf\u4fe1\u53f7\u7684DSP\u3002 \u6570\u5b57\u4fe1\u53f7\u5904\u7406\u82af\u7247\uff0c\u611f\u5174\u8da3\u7684\u53ef\u53c2\u9605 4 7.\u56fe\u50cf 7.1 \u50cf\u7d20 \u4e00\u90e8\u624b\u673a\u5c4f\u5e55\u7684\u5206\u8fa8\u7387\u662f1280\u00d7720\uff0c\u8bf4\u660e\u6c34\u5e73\u65b9\u5411\u6709720\u4e2a\u50cf\u7d20\u70b9\uff0c\u5782\u76f4\u65b9\u5411\u67091280\u4e2a\u50cf\u7d20\u70b9\uff0c\u67091280\u00d7720\u4e2a\u50cf\u7d20\u70b9\uff08\u5206\u8fa8\u7387\uff09\u3002\u6bcf\u4e2a\u50cf\u7d20\u70b9\u90fd\u7531\u4e09\u4e2a\u5b50\u50cf\u7d20\u70b9\u3002\u5f53\u8981\u663e\u793a\u67d0\u7bc7\u6587\u5b57\u6216\u8005\u67d0\u5e45\u56fe\u50cf\u65f6\uff0c\u5c31\u4f1a\u628a\u8fd9\u5e45\u56fe\u50cf\u7684\u6bcf\u4e00\u4e2a\u50cf\u7d20\u70b9\u7684RGB\u901a\u9053\u5206\u522b\u5bf9\u5e94\u7684\u5c4f\u5e55\u4f4d\u7f6e\u4e0a\u7684\u5b50\u50cf\u7d20\u70b9\u7ed8\u5236\u5230\u5c4f\u5e55\u4e0a\uff0c\u4ece\u800c\u663e\u793a\u6574\u4e2a\u56fe\u50cf 6 \u3002 7.2 RGB\u8868\u793a\u65b9\u5f0f \u901a\u7528\u56fe\u50cf\u6570\u636e\u683c\u5f0f\uff0c\u7406\u8bba\u4e0a\u4efb\u4f55\u989c\u8272\u90fd\u53ef\u4ee5\u7528\u7ea2\u7eff\u84dd\u4e09\u79cd\u57fa\u672c\u989c\u8272\u6df7\u5408\u800c\u6210\u3002\u6709RGB888\u3001ARGB8888\u3001RGB565\u7b49\u683c\u5f0f(Android) RGB565\uff1a\u517116\u6bd4\u7279\uff0c\u53602\u4e2a\u5b57\u8282\u3002G\u7ad96\u4f4d\u662f\u56e0\u4e3a\u4eba\u7684\u773c\u775b\u5bf9\u7eff\u5149\u6700\u4e3a\u654f\u611f\uff0c\u53ef\u8868\u793a\u989c\u8272\u6570\u4e3a2^16 = 65536\u8272\u3002 RGB888\uff1a\u517124\u6bd4\u7279\uff0c\u53603\u4e2a\u5b57\u8282\uff0c\u53ef\u8868\u793a\u989c\u8272\u6570\u4e3a2^24 = 1677W\u3002 ARGB8888\uff1a\u517132\u6bd4\u7279\uff0c\u53604\u4e2a\u5b57\u8282\uff0c\u53ef\u8868\u793a\u989c\u8272\u6570\u4e3a2^32\u3002 7.3 YUV\u8868\u793a\u65b9\u5f0f \u5bf9\u4e8e\u89c6\u9891\u5e27\u7684\u88f8\u6570\u636e\u8868\u793a\uff0c\u66f4\u591a\u7684\u662fYUV\u6570\u636e\u683c\u5f0f\uff0c\u4e3b\u8981\u5e94\u7528\u4e8e\u4f18\u5316\u5f69\u8272\u89c6\u9891\u4fe1\u53f7\u7684\u4f20\u8f93\uff0c\u4f7f\u5176\u5411\u540e\u517c\u5bb9\u8001\u5f0f\u9ed1\u767d\u7535\u89c6\u3002\u76f8\u6bd4RGB\u5b83\u6700\u5927\u7684\u4f18\u70b9\u5728\u4e8e\u53ea\u9700\u8981\u5360\u7528\u6781\u5c11\u7684\u9891\u5bbd\uff08RGB\u8981\u6c42\u4e09\u4e2a\u72ec\u7acb\u7684\u89c6\u9891\u4fe1\u53f7\u540c\u65f6\u4f20\u8f93\uff09\u3002 7 Y\uff1aLuma \u660e\u4eae\u5ea6\uff0c\u4e5f\u79f0\u7070\u9636\u503c\uff0c\u4ee5\u524d\u7684\u9ed1\u767d\u7535\u89c6\uff0c\u662f\u53ea\u6709Y\u4fe1\u53f7\u800c\u6ca1\u6709UV\u4fe1\u53f7\u3002 UV\uff1aChroma \u8272\u5ea6\uff0c\u8272\u5f69\u53ca\u9971\u548c\u5ea6\uff0c\u7528\u4e8e\u6307\u5b9a\u50cf\u7d20\u7684\u989c\u8272\u3002 \u201c\u8272\u5ea6\u201d\u5b9a\u4e49\u4e86\u989c\u8272\u7684\u4e24\u4e2a\u65b9\u9762\u2014\u2014\u8272\u8c03(Cr)\u4e0e\u9971\u548c\u5ea6(Cb) Cr\u53cd\u6620\u4e86RGB\u8f93\u5165\u4fe1\u53f7\u7ea2\u8272\u90e8\u5206\u4e0eRGB\u4fe1\u53f7\u4eae\u5ea6\u503c\u4e4b\u95f4\u7684\u5dee\u5f02 Cb\u53cd\u6620\u7684\u5219\u662fRGB\u8f93\u5165\u4fe1\u53f7\u84dd\u8272\u90e8\u5206\u4e0eRGB\u4fe1\u53f7\u4eae\u5ea6\u503c\u4e4b\u95f4\u7684\u5dee\u5f02\u3002 7.4 YUV\u91c7\u6837\u683c\u5f0f \u4e3b\u6d41\u6709\u5982\u4e0b\u4e09\u79cd YUV 4:4:4 \u91c7\u6837 YUV 4:2:2 \u91c7\u6837 YUV 4:2:0 \u91c7\u6837 7.4.1 YUV 4:4:4 YUV 4:4:4 \u8868\u793a Y\u3001U\u3001V \u4e09\u5206\u91cf\u91c7\u6837\u7387\u76f8\u540c\uff0c\u5373\u6bcf\u4e2a\u50cf\u7d20\u7684\u4e09\u5206\u91cf\u4fe1\u606f\u5b8c\u6574\uff0c\u90fd\u662f 8bit\uff0c\u6bcf\u4e2a\u50cf\u7d20\u5360\u7528 3 \u4e2a\u5b57\u8282\u3002 \u56db\u4e2a\u50cf\u7d20\u4e3a\uff1a [Y0 U0 V0] [Y1 U1 V1] [Y2 U2 V2] [Y3 U3 V3] \u91c7\u6837\u7684\u7801\u6d41\u4e3a\uff1a Y0 U0 V0 Y1 U1 V1 Y2 U2 V2 Y3 U3 V3 \u6620\u5c04\u51fa\u7684\u50cf\u7d20\u70b9\u4e3a\uff1a[Y0 U0 V0] [Y1 U1 V1] [Y2 U2 V2] [Y3 U3 V3] 7.4.2 YUV 4:2:2 YUV 4:2:2 \u8868\u793a UV \u5206\u91cf\u7684\u91c7\u6837\u7387\u662f Y \u5206\u91cf\u7684\u4e00\u534a\u3002 \u56db\u4e2a\u50cf\u7d20\u4e3a\uff1a [Y0 U0 V0] [Y1 U1 V1] [Y2 U2 V2] [Y3 U3 V3] \u91c7\u6837\u7684\u7801\u6d41\u4e3a\uff1a Y0 U0 Y1 V1 Y2 U2 Y3 U3 \u6620\u5c04\u51fa\u7684\u50cf\u7d20\u70b9\u4e3a\uff1a[Y0 U0 V1]\u3001[Y1 U0 V1]\u3001[Y2 U2 V3]\u3001[Y3 U2 V3] \u5176\u4e2d\uff0c\u6bcf\u91c7\u6837\u4e00\u4e2a\u50cf\u7d20\u70b9\uff0c\u90fd\u4f1a\u91c7\u6837\u5176 Y \u5206\u91cf\uff0c\u800c U\u3001V \u5206\u91cf\u90fd\u4f1a\u95f4\u9694\u91c7\u96c6\u4e00\u4e2a\uff0c\u6620\u5c04\u4e3a\u50cf\u7d20\u70b9\u65f6\uff0c\u7b2c\u4e00\u4e2a\u50cf\u7d20\u70b9\u548c\u7b2c\u4e8c\u4e2a\u50cf\u7d20\u70b9\u5171\u7528\u4e86 U0\u3001V1 \u5206\u91cf\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u4ece\u800c\u8282\u7701\u4e86\u56fe\u50cf\u7a7a\u95f4\u3002 \u6bd4\u5982\u4e00\u5f20 1920 * 1280 \u5927\u5c0f\u7684\u56fe\u7247\uff0c\u91c7\u7528 YUV 4:2:2 \u91c7\u6837\u65f6\u7684\u5927\u5c0f\u4e3a\uff1a (1920 * 1280 * 8 + 1920 * 1280 * 0.5 * 8 * 2 ) / 8 / 1024 / 1024 = 4.68M 7.4.3 YUV 4:2:0 YUV 4:2:0 \u5e76\u4e0d\u610f\u5473\u7740\u4e0d\u91c7\u6837 V \u5206\u91cf\u3002\u5b83\u6307\u7684\u662f\u5bf9\u6bcf\u6761\u626b\u63cf\u7ebf\u6765\u8bf4\uff0c\u53ea\u6709\u4e00\u79cd\u8272\u5ea6\u5206\u91cf\u4ee5 2:1 \u7684\u91c7\u6837\u7387\u5b58\u50a8\uff0c\u76f8\u90bb\u7684\u626b\u63cf\u884c\u5b58\u50a8\u4e0d\u540c\u7684\u8272\u5ea6\u5206\u91cf\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u7b2c\u4e00\u884c\u662f 4:2:0\uff0c\u4e0b\u4e00\u884c\u5c31\u662f 4:0:2\uff0c\u5728\u4e0b\u4e00\u884c\u5c31\u662f 4:2:0\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 \u56fe\u50cf\u50cf\u7d20\u4e3a\uff1a [Y0 U0 V0]\u3001[Y1 U1 V1]\u3001 [Y2 U2 V2]\u3001 [Y3 U3 V3] [Y5 U5 V5]\u3001[Y6 U6 V6]\u3001 [Y7 U7 V7] \u3001[Y8 U8 V8] \u91c7\u6837\u7684\u7801\u6d41\u4e3a\uff1a Y0 U0 Y1 Y2 U2 Y3 Y5 V5 Y6 Y7 V7 Y8 \u6620\u5c04\u51fa\u7684\u50cf\u7d20\u70b9\u4e3a\uff1a [Y0 U0 V5]\u3001[Y1 U0 V5]\u3001[Y2 U2 V7]\u3001[Y3 U2 V7] [Y5 U0 V5]\u3001[Y6 U0 V5]\u3001[Y7 U2 V7]\u3001[Y8 U2 V7] \u4e00\u5f20 1920 * 1280 \u5927\u5c0f\u7684\u56fe\u7247\uff0c\u91c7\u7528 YUV 4:2:2 \u91c7\u6837\u65f6\u7684\u5927\u5c0f\u4e3a\uff1a (1920 * 1280 * 8 + 1920 * 1280 * 0.25 * 8 * 2 ) / 8 / 1024 / 1024 = 3.51M \u76f8\u6bd4\u8f83RGB\u8282\u7701\u4e86\u4e00\u534a\u7684\u7a7a\u95f4\u3002 7.5 YUV\u5b58\u50a8\u683c\u5f0f YUV \u6570\u636e\u6709\u4e24\u79cd\u5b58\u50a8\u683c\u5f0f\uff1a\u5e73\u9762\u683c\u5f0f\uff08planar format\uff09\u548c\u6253\u5305\u683c\u5f0f\uff08packed format\uff09 planar format\uff1a\u5148\u8fde\u7eed\u5b58\u50a8\u6240\u6709\u50cf\u7d20\u70b9\u7684 Y\uff0c\u7d27\u63a5\u7740\u5b58\u50a8\u6240\u6709\u50cf\u7d20\u70b9\u7684 U\uff0c\u968f\u540e\u662f\u6240\u6709\u50cf\u7d20\u70b9\u7684 V\u3002 packed format\uff1a\u6bcf\u4e2a\u50cf\u7d20\u70b9\u7684 Y\u3001U\u3001V \u662f\u8fde\u7eed\u4ea4\u9519\u5b58\u50a8\u7684\u3002 \u4e0d\u540c\u7684\u91c7\u6837\u65b9\u5f0f\u548c\u5b58\u50a8\u683c\u5f0f\uff0c\u5c31\u4f1a\u4ea7\u751f\u591a\u79cd YUV \u5b58\u50a8\u65b9\u5f0f\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u57fa\u4e8eYUV420 \u7684\u5b58\u50a8\u65b9\u5f0f\u3002 YUV420P \u548c YUV420SP YUV420P \u662f\u57fa\u4e8e planar \u5e73\u9762\u6a21\u5f0f\u8fdb\u884c\u5b58\u50a8\uff0c\u5148\u5b58\u50a8\u6240\u6709\u7684 Y \u5206\u91cf\uff0c\u7136\u540e\u5b58\u50a8\u6240\u6709\u7684 U \u5206\u91cf\u6216\u8005 V \u5206\u91cf\u3002 \u540c\u6837\uff0cYUV420SP \u4e5f\u662f\u57fa\u4e8e planar \u5e73\u9762\u6a21\u5f0f\u5b58\u50a8\uff0c\u4e0e YUV420P \u7684\u533a\u522b\u5728\u4e8e\u5b83\u7684 U\u3001V \u5206\u91cf\u662f\u6309\u7167 UV \u6216\u8005 VU \u4ea4\u66ff\u987a\u5e8f\u8fdb\u884c\u5b58\u50a8\u3002 YU12 \u548c YU21 YU12 \u548c YV12 \u683c\u5f0f\u90fd\u5c5e\u4e8e YUV 420P \u7c7b\u578b\uff0c\u5373\u5148\u5b58\u50a8 Y \u5206\u91cf\uff0c\u518d\u5b58\u50a8 U\u3001V \u5206\u91cf\uff0c\u533a\u522b\u5728\u4e8e\uff1aYU12 \u662f\u5148 Y \u518d U \u540e V\uff0c\u800c YV12 \u662f\u5148 Y \u518d V \u540e U \u3002 NV21 \u548c NV21 NV12 \u548c NV21 \u683c\u5f0f\u90fd\u5c5e\u4e8e YUV420SP \u7c7b\u578b\u3002\u5b83\u4e5f\u662f\u5148\u5b58\u50a8\u4e86 Y \u5206\u91cf\uff0c\u4f46\u63a5\u4e0b\u6765\u5e76\u4e0d\u662f\u518d\u5b58\u50a8\u6240\u6709\u7684 U \u6216\u8005 V \u5206\u91cf\uff0c\u800c\u662f\u628a UV \u5206\u91cf\u4ea4\u66ff\u8fde\u7eed\u5b58\u50a8\u3002 NV12 \u662f IOS \u4e2d\u6709\u7684\u6a21\u5f0f\uff0c\u5b83\u7684\u5b58\u50a8\u987a\u5e8f\u662f\u5148\u5b58 Y \u5206\u91cf\uff0c\u518d UV \u8fdb\u884c\u4ea4\u66ff\u5b58\u50a8\u3002 NV21 \u662f \u5b89\u5353 \u4e2d\u6709\u7684\u6a21\u5f0f\uff0c\u5b83\u7684\u5b58\u50a8\u987a\u5e8f\u662f\u5148\u5b58 Y \u5206\u91cf\uff0c\u5728 VU \u4ea4\u66ff\u5b58\u50a8\u3002 7.5 RGB\u548cYUV\u7684\u76f8\u4e92\u8f6c\u5316 8. 3A\u7b97\u6cd5 8.1 AF \u81ea\u52a8\u5bf9\u7126 \u76ee\u7684\u662f\u83b7\u5f97\u6e05\u6670\u5ea6\u66f4\u9ad8\u5f97\u56fe\u50cf\u3002\u65b9\u6cd5\u5206\u4e24\u7c7b\uff0c\u4e00\u7c7b\u662f\u4f20\u7edf\u7684\u805a\u7126\u65b9\u6cd5\uff0c\u4e00\u79cd\u662f\u57fa\u4e8e\u6570\u5b57\u56fe\u50cf\u5904\u7406\u65b9\u5f0f\u7684\u56fe\u50cf\u805a\u7126\u65b9\u6cd5\u3002\u4f20\u7edf\u7684\u65b9\u5f0f\u4e2d\uff0c\u81ea\u52a8\u805a\u7126\u901a\u8fc7\u7ea2\u5916\u7ebf\u6216\u8005\u8d85\u751f\u6ce2\u6d4b\u8ddd\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u3002\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u5b89\u88c5\u53d1\u5c04\u673a\u548c\u63a5\u6536\u673a\uff0c\u589e\u52a0\u4e86\u6444\u50cf\u673a\u7684\u6210\u672c\uff0c\u800c\u4e14\u8d85\u58f0\u6ce2\u5bf9\u4e8e\u73bb\u7483\u540e\u9762\u7684\u88ab\u6444\u7269\u4f53\u4e0d\u80fd\u5f88\u597d\u7684\u81ea\u52a8\u805a\u7126\u3002\u8fd9\u4e00\u7c7b\u805a\u7126\u65b9\u5f0f\u5728\u67d0\u4e9b\u573a\u5408\u53d7\u5230\u4e86\u9650\u5236\u3002\u56e0\u6b64\u5728\u65e5\u8d8b\u96c6\u6210\u5316\u3001\u5fae\u578b\u5316\u3001\u4f4e\u6210\u672c\u7684\u5e94\u7528\u4e2d\uff0c\u57fa\u4e8e\u6570\u5b57\u56fe\u50cf\u5904\u7406\u7684\u81ea\u52a8\u805a\u7126\u65b9\u6cd5\u66f4\u5177\u6709\u4f18\u52bf\u3002 \u6839\u636e\u955c\u5934\u6210\u50cf\u5206\u6790\uff0c\u955c\u5934\u7684\u5149\u5b66\u4f20\u9012\u51fd\u6570\u53ef\u4ee5\u8fd1\u4f3c\u4e3a\u9ad8\u65af\u51fd\u6570\uff0c\u5b83\u7684\u4f5c\u7528\u7b49\u6548\u4e3a\u4e00\u4e2a\u4f4e\u901a\u6ee4\u6ce2\u5668\u3002\u79bb\u7126\u91cf\u8d8a\u5927\uff0c\u5149\u5b66\u4f20\u9012\u51fd\u6570\u7684\u622a\u6b62\u9891\u7387\u8d8a\u4f4e\u3002\u4ece\u9891\u57df\u4e0a\u770b\uff0c\u79bb\u7126\u91cf\u589e\u5927\uff0c\u5bf9\u56fe\u50cf\u9ad8\u9891\u80fd\u91cf\u9020\u6210\u635f\u5931\uff0c\u4f7f\u5f97\u56fe\u50cf\u7684\u7ec6\u8282\u9010\u6e10\u6a21\u7cca\u3002\u4ece\u7a7a\u57df\u4e0a\u770b\uff0c\u79bb\u7126\u91cf\u589e\u5927\uff0c\u70b9\u5149\u6e90\u6210\u50cf\u7684\u5149\u5f3a\u5206\u5e03\u51fd\u6570\u8d8a\u5206\u6563\uff0c\u53ef\u5206\u8fa8\u7684\u6210\u50cf\u95f4\u8ddd\u8d8a\u5927\uff0c\u56fe\u50cf\u76f8\u90bb\u50cf\u7d20\u4e92\u76f8\u91cd\u53e0\uff0c\u56fe\u50cf\u7ec6\u8282\u635f\u5931\u4e25\u91cd\u3002\u56e0\u6b64\u56fe\u50cf\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u65f6\u5efa\u7acb\u5728\u56fe\u50cf\u8fb9\u7f18\u9ad8\u9891\u80fd\u91cf\u4e0a\u7684\u3002 \u6570\u5b57\u5904\u7406\u65b9\u6cd5\u4e2d\uff0c\u81ea\u52a8\u805a\u7126\u7684\u5173\u952e\u5728\u4e8e\u6784\u9020\u56fe\u50cf\u7684\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u3002\u5df1\u7ecf\u63d0\u51fa\u7684\u56fe\u50cf\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u82de\u62ec\u7070\u5ea6\u65b9\u5dee\u3001\u68af\u5ea6\u80fd\u91cf\u3001\u5ae1\u51fd\u6570\u548c\u4e00\u4e9b\u9891\u57df\u51fd\u6570\u6cd5\u3002\u56fe\u50cf\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u5fc5\u987b\u5177\u6709\u826f\u597d\u7684\u5355\u5cf0\u6027\u548c\u5c16\u9510\u6027\uff0c\u800c\u4e14\u8981\u8ba1\u7b97\u91cf\u9002\u5ea6\uff0c\u4ece\u800c\u53ef\u4ee5\u5feb\u901f\u7684\u5b9e\u73b0\u7cbe\u51c6\u5bf9\u7126\u3002 8.2 AE \u81ea\u52a8\u66dd\u5149 \u66dd\u5149\u662f\u7528\u6765\u8ba1\u7b97\u4ece\u666f\u7269\u5230\u8fbe\u76f8\u673a\u7684\u5149\u901a\u91cf\u5927\u5c0f\u7684\u7269\u7406\u91cf\u3002\u56fe\u50cf\u4f20\u611f\u5668\u53ea\u6709\u83b7\u5f97\u6b63\u786e\u7684\u66dd\u5149\uff0c\u624d\u80fd\u5f97\u5230\u9ad8\u8d28\u91cf\u7684\u7167\u7247\u3002\u66dd\u5149\u8fc7\u5ea6\uff0c\u56fe\u50cf\u770b\u8d77\u6765\u592a\u4eae\u66dd\u5149\u4e0d\u8db3\uff0c\u5219\u56fe\u50cf\u770b\u8d77\u6765\u592a\u6697\u3002\u5230\u8fbe\u4f20\u611f\u5668\u7684\u5149\u901a\u91cf\u7684\u5927\u5c0f\u4e3b\u8981\u7531\u4e24\u65b9\u9762\u56e0\u7d20\u51b3\u5b9a\uff1a\u66dd\u5149\u65f6\u95f4\u7684\u957f\u77ed\u4ee5\u53ca\u5149\u5708\u7684\u5927\u5c0f\u3002 \u5229\u7528\u5149\u5708\u8fdb\u884c\u81ea\u52a8\u66dd\u5149\uff0c\u4e3b\u8981\u6839\u636e\u6240\u62cd\u6444\u7684\u573a\u666f\u6765\u63a7\u5236\u5149\u5708\u5927\u5c0f\uff0c\u4f7f\u5f97\u8fdb\u5149\u91cf\u7ef4\u6301\u5728\u4e00\u5b9a\u8303\u56f4\u5185\u3002\u901a\u8fc7\u5149\u5708\u8fdb\u884c\u66dd\u5149\u63a7\u5236\u7684\u6210\u672c\u6bd4\u8f83\u9ad8\u3002\u73b0\u5728\u5e02\u573a\u6240\u89c1\u7684\u4e2d\u4f4e\u7aef\u6444\u50cf\u5934\u91c7\u7528\u7684\u4e3b\u6d41\u6280\u672f\u901a\u8fc7\u8c03\u6574\u66dd\u5149\u65f6\u95f4\u6765\u5b9e\u73b0\u81ea\u52a8\u66dd\u5149\u3002 \u76ee\u524d\u81ea\u52a8\u66dd\u5149\u63a7\u5236\u7b97\u6cd5\u65b9\u6cd5\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u4f7f\u7528\u53c2\u7167\u4eae\u5ea6\u503c\uff0c\u5c06\u56fe\u50cf\u5747\u5300\u5206\u6210\u8bb8\u591a\u7684\u5b50\u56fe\u50cf\uff0c\u6bcf\u4e00\u5757\u5b50\u56fe\u50cf\u7684\u4eae\u5ea6\u88ab\u7528\u6765\u8bbe\u7f6e\u53c2\u7167\u4eae\u5ea6\u503c\uff0c\u8fd9\u4e2a\u4eae\u5ea6\u503c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u5feb\u95e8\u7684\u901f\u5ea6\u6765\u83b7\u5f97\u3002\u53e6\u5916\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u901a\u8fc7\u7814\u7a76\u4e0d\u540c\u5149\u7167\u6761\u4ef6\u4e0b\u7684\u4eae\u5ea6\u4e0e\u66dd\u5149\u503c\u4e4b\u95f4\u7684\u5173\u7cfb\u6765\u8fdb\u884c\u66dd\u5149\u63a7\u5236\u3002\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u7814\u7a76\u4e86\u5927\u91cf\u7684\u56fe\u50cf\u4f8b\u5b50\u548c\u8bb8\u591a\u4e0d\u540c\u7684\u5149\u7167\u6761\u4ef6\u3002\u800c\u4e14\u5747\u9700\u8981\u5728\u4e0d\u540c\u7684\u5149\u7167\u6761\u4ef6\u4e0b\u6240\u91c7\u96c6\u7684\u56fe\u50cf\u6570\u636e\u5e93\u3002\u5b9e\u9645\u4e2d\u81ea\u52a8\u66dd\u5149\u7814\u7a76\u9700\u8981\u89e3\u51b3\u597d\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\uff0c\u9996\u5148\u662f\u5224\u5b9a\u56fe\u50cf\u662f\u5426\u9700\u8981\u81ea\u52a8\u66dd\u5149\uff0c\u5176\u6b21\u662f\u81ea\u52a8\u66dd\u5149\u65f6\uff0c\u5982\u4f55\u8c03\u6574\u5149\u7535\u8f6c\u6362\u540e\u6570\u5b57\u4fe1\u53f7\u6765\u627e\u51fa\u81ea\u52a8\u66dd\u5149\u80fd\u529b\u8865\u507f\u51fd\u6570\uff0c\u6700\u540e\u5c31\u662f\u8c03\u6574\u5230\u4ec0\u4e48\u7a0b\u5ea6\u6700\u4e3a\u5408\u9002\u3002 8.3 AWB \u81ea\u52a8\u767d\u5e73\u8861 \u767d\u5e73\u8861\u7684\u57fa\u672c\u539f\u7406\u662f\u5728\u4efb\u610f\u73af\u5883\u4e0b\uff0c \u628a\u767d\u8272\u7269\u4f53\u8fd8\u539f\u6210\u767d\u8272\u7269\u4f53\uff0c \u4e5f\u5c31\u662f\u901a\u8fc7\u627e\u5230\u56fe\u50cf\u4e2d\u7684\u767d\u5757\uff0c \u7136\u540e\u8c03\u6574R/G/B \u7684\u6bd4\u4f8b\uff0c \u5982\u4e0b\u5173\u7cfb\uff1a R\u2019= R * R_Gain G\u2019 = G * G_Gain B\u2019 = B * B_Gain R\u2019 = G\u2019= B\u2019 AWB \u7b97\u6cd5\u901a\u5e38\u5305\u62ec\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a (1)\u8272\u6e29\u7edf\u8ba1\uff1a \u6839\u636e\u56fe\u50cf\u7edf\u8ba1\u51fa\u8272\u6e29\uff1b (2)\u8ba1\u7b97\u901a\u9053\u589e\u76ca\uff1a \u8ba1\u7b97\u51faR \u548cB \u901a\u9053\u7684\u589e\u76ca\uff1b (3)\u8fdb\u884c\u504f\u8272\u7684\u77eb\u6b63\uff1a \u6839\u636e\u7ed9\u51fa\u7684\u589e\u76ca\uff0c \u7b97\u51fa\u504f\u8272\u56fe\u50cf\u7684\u77eb\u6b63\u3002 9.\u4e2a\u4eba\u7b80\u4ecb \u804c\u4e1a\uff1a\u963f\u91cc\u5df4\u5df4 - \u65e0\u7ebf\u5f00\u53d1\u4e13\u5bb6\uff0c\u53ef\u5185\u63a8 \u90ae\u4ef6\uff1asunquan9301@163.com WX\uff1asunquan97 \u6dfb\u52a0\u8bf7\u6ce8\u660eCSDN + \u539f\u56e0\uff0c \u6444\u50cf\u5934\u5de5\u4f5c\u539f\u7406 \u21a9 camera\u57fa\u672c\u77e5\u8bc6 \u21a9 \u21a9 \u8be6\u89e3CCD\u548cCMOS\u7684\u533a\u522b\u53ca\u4e3b\u8981\u786c\u4ef6\u6280\u672f\u6307\u6807 \u21a9 ISP\u6d41\u7a0b\u6982\u8ff0 \u21a9 \u21a9 ISPfuncs \u21a9 \u97f3\u89c6\u9891\u5f00\u53d1\u8fdb\u9636\u6307\u5357 \u21a9 \u4e00\u6587\u7406\u89e3 YUV \u21a9","title":"Camera 1"},{"location":"android/camera/camera_1/#1","text":"\u672c\u7bc7\u6587\u7ae0\u4e3aCamera\u7cfb\u5217\u6587\u7ae0\u7684\u7b2c\u4e00\u7bc7\uff0c\u4e3b\u8981\u9610\u8ff0Camera\u6444\u50cf\u5934\u7684 \u57fa\u7840\u7406\u8bba\u77e5\u8bc6 \uff0c\u89e3\u51b3Camera\u786c\u4ef6\u6216Camera\u8f6f\u4ef6\u5f00\u53d1\u7684\u4e00\u4e9b\u56f0\u60d1\u3002\u8be5\u7cfb\u5217\u6587\u7ae0\u4e3b\u8981\u56f4\u7ed5Android\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\uff0c\u5e76\u6d89\u53caAndroid\u7cfb\u7edf\u4e0aCamera\u7684\u534f\u8bae\u3001\u5b9e\u73b0\u548c\u5e94\u7528\u3002 \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002\u53ef\u79c1\u4fe1\u3001\u4e5f\u53ef\u90ae\u4ef6\u3001\u8054\u7cfb\u65b9\u5f0f\u89c1\u6587\u7ae0\u672b\u5c3e","title":"1. \u524d\u8a00"},{"location":"android/camera/camera_1/#2-basic-concepts","text":"\u672f\u8bed \u89e3\u91ca \u5907\u6ce8 Camera an optical instrument that captures a visual image. \u5149\u5b66\u4eea\u5668\u6355\u83b7\u89c6\u89c9\u5f62\u8c61\u663e\u793a\u5728\u611f\u5149\u8868\u9762 Image sensor detects and conveys information used to make an image. \u4e24\u79cd\u4e3b\u6d41\u4f20\u611f\u5668\u4e3a CCD \u548c CMOS CCD charge-coupled device \u7535\u8377\u8026\u5408 CMOS Complementary Metal-Oxide Semiconductor \u4e92\u8865\u6027\u6c27\u5316\u91d1\u5c5e\u534a\u5bfc\u4f53 pixel \u50cf\u7d20 \u76f8\u673a\u4f20\u611f\u5668\u4e0a\u7684\u6700\u5c0f\u611f\u5149\u5355\u4f4d IR Filter \u7ea2\u5916\u6ee4\u5149\u7247 \u4eba\u773c\u770b\u4e0d\u5230\u7ea2\u5916\u5149\uff0c\u4f46sensor\u53ef\uff0c\u9700\u5c06\u7ea2\u5916\u5149\u6ee4\u6389\u4f7f\u56fe\u50cf\u66f4\u63a5\u8fd1\u4eba\u773c\u770b\u5230\u6548\u679c\u3002 Lens \u955c\u5934 \u5206\u4e3a\u5851\u80f6\u900f\u955c(plastic)\u6216\u73bb\u7483\u900f\u955c(glass) DSP Digital signal processor, \u5c31\u662f\u628aRaw RGB\u683c\u5f0f\u8f6c\u6362\u6210RGB\u683c\u5f0f\u6216\u8005\u662fYUV\u683c\u5f0f ISP Image signal processor, \u628a sensor \u91c7\u96c6\u5230\u7684\u539f\u59cb\u6570\u636e\u8f6c\u6362\u4e3a\u663e\u793a\u652f\u6301 \u7684\u683c\u5f0f 3A\u7b97\u6cd5 AF\u3001AE\u3001AWB \u81ea\u52a8\u5bf9\u7126\u3001\u81ea\u52a8\u66dd\u5149\u3001\u81ea\u52a8\u767d\u5e73\u8861 A/D\u8f6c\u6362 analog signals to digital format","title":"2. Basic Concepts"},{"location":"android/camera/camera_1/#3","text":"\u6d89\u53ca\u5982\u4e0b\u51e0\u4e2a\u6b65\u9aa4 \u5149\u7ebf\u901a\u8fc7\u955c\u5934Lens\u8fdb\u5165\u6444\u50cf\u5934\u5185\u90e8\u3002 \u56fe\u50cf\u4f20\u611f\u5668\u8f6c\u6362\u5149\u4fe1\u606f\u4e3a\u7535\u4fe1\u606f \u539f\u59cb\u7684RAW Data\u7ecf\u8fc7DSP\u8f6c\u6362\u6210RGB/YUV\u6570\u636e RGB/YUV\u901a\u8fc7\u5e94\u7528\u5c42\u5c55\u73b0","title":"3. \u603b\u4f53\u6d41\u7a0b"},{"location":"android/camera/camera_1/#4","text":"\u6444\u50cf\u5934\u7684\u901a\u7528\u786c\u4ef6\u7ed3\u6784\u5982\u4e0a\u56fe\u6240\u793a\u3002\u5229\u7528\u900f\u955c\u6298\u5c04\u539f\u7406\uff0c\u666f\u7269\u5149\u7ebf\u900f\u8fc7\u955c\u5934\u5728\u805a\u7126\u5e73\u9762\u4e0a\u5f62\u6210\u6e05\u6670\u7684\u50cf\uff0c\u7136\u540e\u901a\u8fc7\u611f\u5149\u6750\u6599CMOS\u6216CCD\u8bb0\u5f55\u5f71\u50cf\uff0c\u5e76\u901a\u8fc7\u7535\u8def\u8f6c\u6362\u4e3a\u7535\u4fe1\u53f7\u3002 1 Lens\u4e00\u822c\u662f\u6709\u51e0\u7247\u900f\u955c\u7ec4\u6210\uff0c\u6309\u6750\u8d28\u53ef\u5206\u4e3a Plastic \uff1a\u5851\u80f6\u900f\u955c Glass \uff1a\u73bb\u7483\u900f\u955c Glass\u6bd4Plastic\u8d35\u3002\u5728\u900f\u5149\u7387\u548c\u611f\u5149\u6027\u7b49\u5149\u5b66\u6307\u6807\u4e0a\u4e5f\u6bd4Plastic\u8981\u597d\u3002\u624b\u673a\u8003\u8651\u5230\u6210\u672c\uff0c\u4e00\u822c\u4f7f\u7528\u7684\u662fPlastic\u3002 \u7ed3\u5408\u4ee5\u4e0a2\u79cd\u7ed3\u6784\uff0c\u6444\u50cf\u5934\u91c7\u7528\u7684\u955c\u5934\u7ed3\u6784\u6709\uff1a1P\u30012P\u30011G1P\u30011G2P\u30012G2P\u30012G3P\u30014G\u30015G\u7b49\u3002\u900f\u955c\u8d8a\u591a\uff0c\u6210\u672c\u8d8a\u9ad8\uff0c\u76f8\u5bf9\u6210\u50cf\u6548\u679c\u4f1a\u66f4\u51fa\u8272\u3002","title":"4. \u6444\u50cf\u5934"},{"location":"android/camera/camera_1/#5-sensor","text":"\u8d1f\u8d23\u5c06Lens\u7684\u5149\u4fe1\u53f7\u8f6c\u6362\u4e3a\u7535\u4fe1\u53f7\uff0c\u518d\u8fdb\u8fc7\u5185\u90e8AD\u8f6c\u6362\u4e3a\u6570\u5b57\u4fe1\u53f7\u3002 \u7531\u4e8e Sensor \u7684\u6bcf\u4e2a pixel \u53ea\u80fd\u611f\u5149 R \u5149\u6216 B \u5149\u6216 G \u5149\uff0c\u56e0\u6b64\u6bcf\u4e2a\u50cf\u7d20\u6b64\u65f6\u5b58\u8d2e\u7684\u662f\u5355\u8272\u7684\uff0c\u79f0\u4e4b\u4e3a RAW DATA \u6570\u636e\u3002 \u60f3\u5c06\u6bcf\u4e2a\u50cf\u7d20\u7684 RAW DATA \u6570\u636e\u8fd8\u539f\u6210\u4e09\u57fa\u8272\uff0c\u5c31\u9700\u8981 ISP \u6765\u5904\u7406\u3002 \u76ee\u524d\u5e38\u7528Sensor\u4e3b\u8981\u6709 CCD \u548c CMOS \uff1a","title":"5. \u4f20\u611f\u5668 Sensor"},{"location":"android/camera/camera_1/#51-ccdcharge-coupled-device","text":"\u9ad8\u611f\u5149\u5ea6\u534a\u5bfc\u4f53\u6750\u6599\u5236\u6210\uff0c\u7531\u8bb8\u591a\u611f\u5149\u5355\u4f4d\u7ec4\u6210\uff0c\u901a\u5e38\u4ee5\u767e\u4e07\u50cf\u7d20\u4e3a\u5355\u4f4d\u3002 \u5f53CCD\u8868\u9762\u53d7\u5230\u5149\u7ebf\u7167\u5c04\u65f6\uff0c\u6bcf\u4e2a\u611f\u5149\u5355\u4f4d\u4f1a\u5c06\u7535\u8377\u53cd\u6620\u5728\u7ec4\u4ef6\u4e0a\uff0c\u6240\u6709\u7684\u611f\u5149\u5355\u4f4d\u6240\u4ea7\u751f\u7684\u4fe1\u53f7\u52a0\u5728\u4e00\u8d77\uff0c\u5c31\u6784\u6210\u4e86\u4e00\u5e45\u5b8c\u6574\u7684\u753b\u9762\u3002","title":"5.1 CCD\uff08Charge Coupled Device) \u7535\u8377\u8026\u5408\u5668\u4ef6\u4f20\u611f\u5668"},{"location":"android/camera/camera_1/#52-cmoscomplementary-metal-oxide-semiconductor","text":"\u7845\u548c\u9517\u505a\u6210\u7684\u534a\u5bfc\u4f53\uff0c\u4f7f\u5176\u5728CMOS\u4e0a\u5171\u5b58\u7740\u5e26N(-)\u548cP(+)\u7ea7\u7684\u534a\u5bfc\u4f53\uff0c\u8fd9\u4e24\u4e2a\u4e92\u8865\u6548\u5e94\u6240\u4ea7\u751f\u7684\u7535\u6d41\u53ef\u4ee5\u88ab\u5904\u7406\u82af\u7247\u8bb0\u5f55\u5e76\u89e3\u8bfb\u6210\u5f71\u50cf\u3002 CMOS\u4f20\u611f\u5668\u4e3b\u8981\u4ee5\u7f8e\u56fd\u3001\u97e9\u56fd\u548c\u4e2d\u56fd\u53f0\u6e7e\u4e3a\u4e3b\u5bfc\uff0c\u4e3b\u8981\u751f\u4ea7\u5382\u5bb6\u662f\u7f8e\u56fd\u7684OmnVison\u3001Agilent\u3001Micron\uff0c\u4e2d\u56fd\u53f0\u6e7e\u7684\u9510\u50cf\u3001\u539f\u76f8\u3001\u6cf0\u89c6\u7b49\uff0c\u97e9\u56fd\u7684\u4e09\u661f\u3001\u73b0\u4ee3\u3002","title":"5.2 CMOS\uff08Complementary Metal-Oxide Semiconductor\uff09\u4e92\u8865\u6027\u6c27\u5316\u91d1\u5c5e\u534a\u5bfc\u4f53"},{"location":"android/camera/camera_1/#53-ccd-vs-cmos","text":"","title":"5.3 CCD VS CMOS"},{"location":"android/camera/camera_1/#531-ccd","text":"\u6280\u672f\u6210\u719f\u3001\u6210\u50cf\u8d28\u91cf\u9ad8\u3001\u7075\u654f\u5ea6\u9ad8\uff0c\u566a\u58f0\u4f4e\uff0c\u54cd\u5e94\u901f\u5ea6\u5feb\uff0c\u6709\u81ea\u626b\u63cf\u529f\u80fd\uff0c\u56fe\u50cf\u7578\u53d8\u5c0f\uff0c\u65e0\u6b8b\u50cf\u3001\u5e94\u7528\u8d85\u5927\u89c4\u6a21\u96c6\u6210\u7535\u8def\u5de5\u827a\u6280\u672f\u751f\u4ea7\uff0c\u50cf\u7d20\u96c6\u6210\u5ea6\u9ad8\uff0c\u5c3a\u5bf8\u7cbe\u786e","title":"5.3.1 CCD\u7279\u70b9"},{"location":"android/camera/camera_1/#532-cmos","text":"\u8bfb\u53d6\u4fe1\u606f\u7684\u65b9\u5f0f\u7b80\u5355\u3001\u8f93\u51fa\u4fe1\u606f\u901f\u7387\u5feb\u3001\u8017\u7535\u7701\uff08\u4ec5\u4e3aCCD\u82af\u7247\u76841/10\u5de6\u53f3\uff09\u3001\u4f53\u79ef\u5c0f\u3001\u91cd\u91cf\u8f7b\u3001\u96c6\u6210\u5ea6\u9ad8\u3001\u4ef7\u683c\u4f4e\u7b49\u7279\u70b9\u3002","title":"5.3.2 CMOS\u7279\u70b9"},{"location":"android/camera/camera_1/#533","text":"\u5982\u56fe-CCD\u548cCMOS\u7684\u611f\u5149\u4e8c\u6781\u7ba1\u6392\u5217\u3002 CCD\u9635\u5217\uff0c\u662f\u5728\u4ec5\u6709\u4e00\u6761\u603b\u7ebf\u540e\u52a0A/D\u8f6c\u6362(\u7d2b\u8272\u7bad\u5934\uff0c\u89c12. Basic Concept)\u3002\u5728\u65f6\u949f\u4fe1\u53f7\u540c\u6b65\u4e0b\uff0c\u4e00\u6b65\u6b65\u79fb\u4f4d\u8bfb\u5bf9\u5e94\u4e8c\u6781\u7ba1\u7684\u7535\u5e73\u503c\u3002 CMOS\u9635\u5217\uff0c\u662f\u5728\u6bcf\u4e2a\u611f\u5149\u4e8c\u6781\u7ba1\u65c1\u90fd\u52a0\u5165\u4e86A/D\u8f6c\u6362\u3002 \u662f\u4e3b\u52a8\u5f0f\u8f93\u51fa\u91c7\u96c6\u7684\u6570\u636e\u4fe1\u606f \uff0c\u800c CCD \u662f\u5728\u540c\u6b65\u7535\u8def\u63a7\u5236\u4e0b \u88ab\u52a8\u5f0f\u7684\u8f93\u51fa\u91c7\u96c6\u7684\u6570\u636e\u3002 \u56e0\u6b64\u6211\u4eec\u8be6\u7ec6\u5728\u6027\u80fd\uff0c\u8017\u7535\uff0c\u753b\u8d28\u7b49\u65b9\u9762\u505a\u521d\u6b65\u6bd4\u8f83 \u6027\u80fd CCD\u9700\u5728\u540c\u6b65\u65f6\u949f\u63a7\u5236\u4e0b\u4ee5\u884c\u4e3a\u5355\u4f4d\u4e00\u4f4d\u4e00\u4f4d\u8f93\u51fa\u4fe1\u606f\uff0c\u901f\u5ea6\u5f53\u7136\u6162\u4e0d\u9002\u5408\u5feb\u901f\u8fde\u62cd\uff0c\u4fdd\u5b58\u56fe\u50cf\u901f\u5ea6\u6162\u3002 CMOS\u9635\u5217\u6709\u5750\u6807\u561b\uff0c\u4f20\u611f\u5668\u91c7\u96c6\u5149\u4fe1\u53f7\u7684\u540c\u65f6\u5c31\u53ef\u4ee5\u53d6\u51fa\u7535\u4fe1\u53f7\uff0c\u4fdd\u5b58\u56fe\u50cf\u901f\u5ea6\u5feb\u3002 \u8017\u7535 CCD\u8017\u7535\u5927\uff0c\u5728\u540c\u6b65\u4fe1\u53f7\u63a7\u5236\u4e0b\u4e00\u4f4d\u4f4d\u8bfb\u53d6\uff0c\u9700\u8981\u65f6\u949f\u63a7\u5236\u7535\u6e90\u548c\u4e09\u7ec4\u7535\u6e90\u4f9b\u7535\u3002 CMOS\u8017\u7535\u5c0f\u3002CMOS\u4f20\u611f\u5668\u7ecf\u5149\u7535\u8f6c\u6362\u540e\u76f4\u63a5\u4ea7\u751f\u7535\u6d41\u6216\u7535\u538b\u4fe1\u53f7\uff0c\u4fe1\u53f7\u8bfb\u53d6\u5341\u5206\u7b80\u5355\uff0c\u800c\u4e14\u611f\u5149\u4e8c\u6781\u7ba1\u6240\u9700\u7684\u7535\u538b\uff0c\u76f4\u63a5\u7531\u6676\u4f53\u653e\u5927\u8f93\u51fa\uff0c\u6240\u4ee5\u9700\u8981\u65bd\u52a0\u5728\u6e90\u6781\u7684\u7535\u5e73\u5f88\u5c0f \u753b\u8d28 CMOS\u662f\u4e3b\u52a8\u5f0f\u8f93\u51fa\u6570\u636e\uff0c\u9635\u5217\u4e0a\u6bcf\u4e2a\u70b9\u90fd\u8981\u7ecf\u8fc7\u4e24\u6761\u4f20\u8f93\u603b\u7ebf\uff0c\u8def\u7a0b\u957f\uff0c\u4f20\u8f93\u65f6\u7684\u566a\u58f0\u5f15\u5165\u591a\u3002 CMOS\u9635\u5217\u7684\u6bcf\u4e2a\u4e8c\u6781\u7ba1\u65c1\u8fb9\u90fd\u6709A/D\uff0c\u5149\u7535\u4f20\u611f\u5143\u4ef6\u4e0e\u7535\u8def\u4e4b\u95f4\u8ddd\u79bb\u5f88\u8fd1\uff0c\u76f8\u4e92\u4e4b\u95f4\u7684\u5149\u7535\u78c1\u5e72\u6270\u8f83\u4e3a\u4e25\u91cd\uff0c\u653e\u5927\u7684\u540c\u65f6\u53ef\u80fd\u5e26\u5165\u7684\u566a\u58f0\u4e5f\u5927\u3002 CMOS\u56e0\u4e3a\u4e8c\u6781\u7ba1\u65c1\u5e26\u6709A/D\u7535\u8def\uff0c\u540c\u6837\u5c3a\u5bf8\u7684sensor\uff0c\u4e8c\u6781\u7ba1\u80fd\u53d7\u5149\u7ebf\u9762\u79ef\u5c0f\uff0c\u4e00\u90e8\u5206\u5149\u7ebf\u88ab\u6d6a\u8d39\u4e86\uff0c\u53d7\u5149\u5f31\u4e8eCCD\u7684\u611f\u5149\u4e8c\u6781\u7ba1\uff0c\u5e26\u5165\u7684\u4e00\u70b9\u5c0f\u566a\u58f0\u5c31\u4f1a\u88ab\u653e\u5927\u3002 \u53d1\u5c55 CCD\u4f20\u611f\u5668\u5236\u4f5c\u6280\u672f\u8d77\u6b65\u8f83\u65e9\uff0c\u6280\u672f\u6bd4\u8f83\u6210\u719f\u3002\u8fd1\u5e74\u6765\uff0cCMOS\u6280\u672f\u53d1\u5c55\u4e00\u65e5\u5343\u91cc\uff0c\u5728\u4e2d\u5c0f\u5c3a\u5bf8\u4f20\u611f\u5668\u4e0a\uff0cCMOS\u548cCCD\u7684\u753b\u8d28\u533a\u522b\u5df2\u7ecf\u5f88\u5c0f\u3002","title":"5.3.3 \u7279\u70b9\u5206\u6790"},{"location":"android/camera/camera_1/#54","text":"\u4f20\u611f\u5668\u5c3a\u5bf8\u5927\u5c0f\u5bf9\u4e8e\u753b\u8d28\u7684\u5f71\u54cd\uff0c\u5c31\u662f\u91c7\u96c6\u5149\u7ebf\u6570\u636e\u7684\u6b63\u786e\u6027\u548c\u5b8c\u6574\u6027\u7684\u4e0d\u540c\u3002** \u4f20\u611f\u5668\u9762\u79ef\u8d8a\u5927\uff0c\u611f\u5149\u9635\u5217\u9762\u79ef\u5c31\u8d8a\u5927\uff0c\u76f8\u90bb\u611f\u5149\u7535\u8def\u7684\u8ddd\u79bb\u5c31\u8d8a\u5927\uff0c\u52a0\u7535\u65f6\u4ea7\u751f\u7684\u7535\u78c1\u5e72\u6270\u5c31\u8d8a\u5c0f\u3002 \u4f20\u611f\u5668\u9762\u79ef\u8d8a\u5927\uff0c\u611f\u5149\u9635\u5217\u9762\u79ef\u5c31\u8d8a\u5927\uff0c\u5bf9\u5e94\u5355\u4e2a\u50cf\u7d20\u7684\u900f\u955c\u5c31\u80fd\u505a\u7684\u8d8a\u5927\uff0c\u805a\u96c6\u5230\u7684\u5149\u7ebf\u5c31\u8d8a\u591a\uff0c\u611f\u5149\u4e8c\u6781\u7ba1\u53d7\u5149\u540e\u4ea7\u751f\u7684\u8f93\u51fa\u7535\u5e73\u5c31\u8d8a\u9ad8\u3002\u5e26\u6765\u66f4\u9ad8\u7684\u4fe1\u566a\u6bd4\uff0c\u8f6c\u6362\u540e\u7684\u4fe1\u606f\u5904\u7406\u6b63\u786e\u7387\u5c31\u8d8a\u9ad8\u3002 \u4f20\u611f\u5668\u81ea\u5df1\u5c31\u603b\u7ed3\u5230\u8fd9\u91cc\uff0c\u5982\u679c\u611f\u5174\u8da3\u53ef\u67e5\u770b\u6ce8\u811a\u6216\u641c\u96c6\u66f4\u591a\u8d44\u6599\uff0c\u6df1\u5165\u63a2\u7a76\u3002 2 3","title":"5.4 \u4f20\u611f\u5668\u5c3a\u5bf8\u548c\u753b\u8d28\u7684\u5173\u7cfb"},{"location":"android/camera/camera_1/#6-isp-and-dsp","text":"\u7531\u4e8e\u672c\u4eba\u4e13\u4e1a\u77e5\u8bc6\u6709\u9650\uff0c\u4e0d\u6df1\u5165\u8fdb\u884c\u603b\u7ed3\u5206\u6790\uff0c\u611f\u5174\u8da3\u53ef\u53c2\u9605\u6570\u5b57\u4fe1\u53f7\u5904\u7406\u7b49\u76f8\u5173\u4e66\u7c4d 2 4 5 ISP \u5904\u7406Image Sensor\uff08\u56fe\u50cf\u4f20\u611f\u5668\uff09\u7684\u8f93\u51fa\u6570\u636e\uff0c\u5982AEC\uff08\u81ea\u52a8\u66dd\u5149\u63a7\u5236\uff09\u3001AGC\uff08\u81ea\u52a8\u589e\u76ca\u63a7\u5236\uff09\u3001AWB\uff08\u81ea\u52a8\u767d\u5e73\u8861\uff09\u3001\u8272\u5f69\u6821\u6b63\u3001Gamma\u6821\u6b63\u3001\u795b\u9664\u574f\u70b9\u3001Auto Black Level\u3001Auto White Level \u7b49\u7b49\u3002 DSP\u529f\u80fd\u8f83\u591a\uff0c\u5b83\u53ef\u4ee5\u505a\u4e9b\u62cd\u7167\u4ee5\u53ca\u56de\u663e\uff08JPEG\u7684\u7f16\u89e3\u7801\uff09\u3001\u5f55\u50cf\u4ee5\u53ca\u56de\u653e\uff08Video \u7684\u7f16\u89e3\u7801\uff09\u3001H.264\u7684\u7f16\u89e3\u7801\u3001\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u65b9\u9762\u7684\u5904\u7406\uff0c\u603b\u4e4b\u662f\u5904\u7406\u6570\u5b57\u4fe1\u53f7\u4e86\u3002 \u53ef\u4ee5\u8ba4\u4e3aISP\u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u5904\u7406\u56fe\u50cf\u4fe1\u53f7\u7684DSP\u3002 \u6570\u5b57\u4fe1\u53f7\u5904\u7406\u82af\u7247\uff0c\u611f\u5174\u8da3\u7684\u53ef\u53c2\u9605 4","title":"6. ISP and DSP"},{"location":"android/camera/camera_1/#7","text":"","title":"7.\u56fe\u50cf"},{"location":"android/camera/camera_1/#71","text":"\u4e00\u90e8\u624b\u673a\u5c4f\u5e55\u7684\u5206\u8fa8\u7387\u662f1280\u00d7720\uff0c\u8bf4\u660e\u6c34\u5e73\u65b9\u5411\u6709720\u4e2a\u50cf\u7d20\u70b9\uff0c\u5782\u76f4\u65b9\u5411\u67091280\u4e2a\u50cf\u7d20\u70b9\uff0c\u67091280\u00d7720\u4e2a\u50cf\u7d20\u70b9\uff08\u5206\u8fa8\u7387\uff09\u3002\u6bcf\u4e2a\u50cf\u7d20\u70b9\u90fd\u7531\u4e09\u4e2a\u5b50\u50cf\u7d20\u70b9\u3002\u5f53\u8981\u663e\u793a\u67d0\u7bc7\u6587\u5b57\u6216\u8005\u67d0\u5e45\u56fe\u50cf\u65f6\uff0c\u5c31\u4f1a\u628a\u8fd9\u5e45\u56fe\u50cf\u7684\u6bcf\u4e00\u4e2a\u50cf\u7d20\u70b9\u7684RGB\u901a\u9053\u5206\u522b\u5bf9\u5e94\u7684\u5c4f\u5e55\u4f4d\u7f6e\u4e0a\u7684\u5b50\u50cf\u7d20\u70b9\u7ed8\u5236\u5230\u5c4f\u5e55\u4e0a\uff0c\u4ece\u800c\u663e\u793a\u6574\u4e2a\u56fe\u50cf 6 \u3002","title":"7.1 \u50cf\u7d20"},{"location":"android/camera/camera_1/#72-rgb","text":"\u901a\u7528\u56fe\u50cf\u6570\u636e\u683c\u5f0f\uff0c\u7406\u8bba\u4e0a\u4efb\u4f55\u989c\u8272\u90fd\u53ef\u4ee5\u7528\u7ea2\u7eff\u84dd\u4e09\u79cd\u57fa\u672c\u989c\u8272\u6df7\u5408\u800c\u6210\u3002\u6709RGB888\u3001ARGB8888\u3001RGB565\u7b49\u683c\u5f0f(Android) RGB565\uff1a\u517116\u6bd4\u7279\uff0c\u53602\u4e2a\u5b57\u8282\u3002G\u7ad96\u4f4d\u662f\u56e0\u4e3a\u4eba\u7684\u773c\u775b\u5bf9\u7eff\u5149\u6700\u4e3a\u654f\u611f\uff0c\u53ef\u8868\u793a\u989c\u8272\u6570\u4e3a2^16 = 65536\u8272\u3002 RGB888\uff1a\u517124\u6bd4\u7279\uff0c\u53603\u4e2a\u5b57\u8282\uff0c\u53ef\u8868\u793a\u989c\u8272\u6570\u4e3a2^24 = 1677W\u3002 ARGB8888\uff1a\u517132\u6bd4\u7279\uff0c\u53604\u4e2a\u5b57\u8282\uff0c\u53ef\u8868\u793a\u989c\u8272\u6570\u4e3a2^32\u3002","title":"7.2 RGB\u8868\u793a\u65b9\u5f0f"},{"location":"android/camera/camera_1/#73-yuv","text":"\u5bf9\u4e8e\u89c6\u9891\u5e27\u7684\u88f8\u6570\u636e\u8868\u793a\uff0c\u66f4\u591a\u7684\u662fYUV\u6570\u636e\u683c\u5f0f\uff0c\u4e3b\u8981\u5e94\u7528\u4e8e\u4f18\u5316\u5f69\u8272\u89c6\u9891\u4fe1\u53f7\u7684\u4f20\u8f93\uff0c\u4f7f\u5176\u5411\u540e\u517c\u5bb9\u8001\u5f0f\u9ed1\u767d\u7535\u89c6\u3002\u76f8\u6bd4RGB\u5b83\u6700\u5927\u7684\u4f18\u70b9\u5728\u4e8e\u53ea\u9700\u8981\u5360\u7528\u6781\u5c11\u7684\u9891\u5bbd\uff08RGB\u8981\u6c42\u4e09\u4e2a\u72ec\u7acb\u7684\u89c6\u9891\u4fe1\u53f7\u540c\u65f6\u4f20\u8f93\uff09\u3002 7 Y\uff1aLuma \u660e\u4eae\u5ea6\uff0c\u4e5f\u79f0\u7070\u9636\u503c\uff0c\u4ee5\u524d\u7684\u9ed1\u767d\u7535\u89c6\uff0c\u662f\u53ea\u6709Y\u4fe1\u53f7\u800c\u6ca1\u6709UV\u4fe1\u53f7\u3002 UV\uff1aChroma \u8272\u5ea6\uff0c\u8272\u5f69\u53ca\u9971\u548c\u5ea6\uff0c\u7528\u4e8e\u6307\u5b9a\u50cf\u7d20\u7684\u989c\u8272\u3002 \u201c\u8272\u5ea6\u201d\u5b9a\u4e49\u4e86\u989c\u8272\u7684\u4e24\u4e2a\u65b9\u9762\u2014\u2014\u8272\u8c03(Cr)\u4e0e\u9971\u548c\u5ea6(Cb) Cr\u53cd\u6620\u4e86RGB\u8f93\u5165\u4fe1\u53f7\u7ea2\u8272\u90e8\u5206\u4e0eRGB\u4fe1\u53f7\u4eae\u5ea6\u503c\u4e4b\u95f4\u7684\u5dee\u5f02 Cb\u53cd\u6620\u7684\u5219\u662fRGB\u8f93\u5165\u4fe1\u53f7\u84dd\u8272\u90e8\u5206\u4e0eRGB\u4fe1\u53f7\u4eae\u5ea6\u503c\u4e4b\u95f4\u7684\u5dee\u5f02\u3002","title":"7.3 YUV\u8868\u793a\u65b9\u5f0f"},{"location":"android/camera/camera_1/#74-yuv","text":"\u4e3b\u6d41\u6709\u5982\u4e0b\u4e09\u79cd YUV 4:4:4 \u91c7\u6837 YUV 4:2:2 \u91c7\u6837 YUV 4:2:0 \u91c7\u6837","title":"7.4 YUV\u91c7\u6837\u683c\u5f0f"},{"location":"android/camera/camera_1/#741-yuv-444","text":"YUV 4:4:4 \u8868\u793a Y\u3001U\u3001V \u4e09\u5206\u91cf\u91c7\u6837\u7387\u76f8\u540c\uff0c\u5373\u6bcf\u4e2a\u50cf\u7d20\u7684\u4e09\u5206\u91cf\u4fe1\u606f\u5b8c\u6574\uff0c\u90fd\u662f 8bit\uff0c\u6bcf\u4e2a\u50cf\u7d20\u5360\u7528 3 \u4e2a\u5b57\u8282\u3002 \u56db\u4e2a\u50cf\u7d20\u4e3a\uff1a [Y0 U0 V0] [Y1 U1 V1] [Y2 U2 V2] [Y3 U3 V3] \u91c7\u6837\u7684\u7801\u6d41\u4e3a\uff1a Y0 U0 V0 Y1 U1 V1 Y2 U2 V2 Y3 U3 V3 \u6620\u5c04\u51fa\u7684\u50cf\u7d20\u70b9\u4e3a\uff1a[Y0 U0 V0] [Y1 U1 V1] [Y2 U2 V2] [Y3 U3 V3]","title":"7.4.1 YUV 4:4:4"},{"location":"android/camera/camera_1/#742-yuv-422","text":"YUV 4:2:2 \u8868\u793a UV \u5206\u91cf\u7684\u91c7\u6837\u7387\u662f Y \u5206\u91cf\u7684\u4e00\u534a\u3002 \u56db\u4e2a\u50cf\u7d20\u4e3a\uff1a [Y0 U0 V0] [Y1 U1 V1] [Y2 U2 V2] [Y3 U3 V3] \u91c7\u6837\u7684\u7801\u6d41\u4e3a\uff1a Y0 U0 Y1 V1 Y2 U2 Y3 U3 \u6620\u5c04\u51fa\u7684\u50cf\u7d20\u70b9\u4e3a\uff1a[Y0 U0 V1]\u3001[Y1 U0 V1]\u3001[Y2 U2 V3]\u3001[Y3 U2 V3] \u5176\u4e2d\uff0c\u6bcf\u91c7\u6837\u4e00\u4e2a\u50cf\u7d20\u70b9\uff0c\u90fd\u4f1a\u91c7\u6837\u5176 Y \u5206\u91cf\uff0c\u800c U\u3001V \u5206\u91cf\u90fd\u4f1a\u95f4\u9694\u91c7\u96c6\u4e00\u4e2a\uff0c\u6620\u5c04\u4e3a\u50cf\u7d20\u70b9\u65f6\uff0c\u7b2c\u4e00\u4e2a\u50cf\u7d20\u70b9\u548c\u7b2c\u4e8c\u4e2a\u50cf\u7d20\u70b9\u5171\u7528\u4e86 U0\u3001V1 \u5206\u91cf\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u4ece\u800c\u8282\u7701\u4e86\u56fe\u50cf\u7a7a\u95f4\u3002 \u6bd4\u5982\u4e00\u5f20 1920 * 1280 \u5927\u5c0f\u7684\u56fe\u7247\uff0c\u91c7\u7528 YUV 4:2:2 \u91c7\u6837\u65f6\u7684\u5927\u5c0f\u4e3a\uff1a (1920 * 1280 * 8 + 1920 * 1280 * 0.5 * 8 * 2 ) / 8 / 1024 / 1024 = 4.68M","title":"7.4.2 YUV 4:2:2"},{"location":"android/camera/camera_1/#743-yuv-420","text":"YUV 4:2:0 \u5e76\u4e0d\u610f\u5473\u7740\u4e0d\u91c7\u6837 V \u5206\u91cf\u3002\u5b83\u6307\u7684\u662f\u5bf9\u6bcf\u6761\u626b\u63cf\u7ebf\u6765\u8bf4\uff0c\u53ea\u6709\u4e00\u79cd\u8272\u5ea6\u5206\u91cf\u4ee5 2:1 \u7684\u91c7\u6837\u7387\u5b58\u50a8\uff0c\u76f8\u90bb\u7684\u626b\u63cf\u884c\u5b58\u50a8\u4e0d\u540c\u7684\u8272\u5ea6\u5206\u91cf\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u7b2c\u4e00\u884c\u662f 4:2:0\uff0c\u4e0b\u4e00\u884c\u5c31\u662f 4:0:2\uff0c\u5728\u4e0b\u4e00\u884c\u5c31\u662f 4:2:0\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 \u56fe\u50cf\u50cf\u7d20\u4e3a\uff1a [Y0 U0 V0]\u3001[Y1 U1 V1]\u3001 [Y2 U2 V2]\u3001 [Y3 U3 V3] [Y5 U5 V5]\u3001[Y6 U6 V6]\u3001 [Y7 U7 V7] \u3001[Y8 U8 V8] \u91c7\u6837\u7684\u7801\u6d41\u4e3a\uff1a Y0 U0 Y1 Y2 U2 Y3 Y5 V5 Y6 Y7 V7 Y8 \u6620\u5c04\u51fa\u7684\u50cf\u7d20\u70b9\u4e3a\uff1a [Y0 U0 V5]\u3001[Y1 U0 V5]\u3001[Y2 U2 V7]\u3001[Y3 U2 V7] [Y5 U0 V5]\u3001[Y6 U0 V5]\u3001[Y7 U2 V7]\u3001[Y8 U2 V7] \u4e00\u5f20 1920 * 1280 \u5927\u5c0f\u7684\u56fe\u7247\uff0c\u91c7\u7528 YUV 4:2:2 \u91c7\u6837\u65f6\u7684\u5927\u5c0f\u4e3a\uff1a (1920 * 1280 * 8 + 1920 * 1280 * 0.25 * 8 * 2 ) / 8 / 1024 / 1024 = 3.51M \u76f8\u6bd4\u8f83RGB\u8282\u7701\u4e86\u4e00\u534a\u7684\u7a7a\u95f4\u3002","title":"7.4.3 YUV 4:2:0"},{"location":"android/camera/camera_1/#75-yuv","text":"YUV \u6570\u636e\u6709\u4e24\u79cd\u5b58\u50a8\u683c\u5f0f\uff1a\u5e73\u9762\u683c\u5f0f\uff08planar format\uff09\u548c\u6253\u5305\u683c\u5f0f\uff08packed format\uff09 planar format\uff1a\u5148\u8fde\u7eed\u5b58\u50a8\u6240\u6709\u50cf\u7d20\u70b9\u7684 Y\uff0c\u7d27\u63a5\u7740\u5b58\u50a8\u6240\u6709\u50cf\u7d20\u70b9\u7684 U\uff0c\u968f\u540e\u662f\u6240\u6709\u50cf\u7d20\u70b9\u7684 V\u3002 packed format\uff1a\u6bcf\u4e2a\u50cf\u7d20\u70b9\u7684 Y\u3001U\u3001V \u662f\u8fde\u7eed\u4ea4\u9519\u5b58\u50a8\u7684\u3002 \u4e0d\u540c\u7684\u91c7\u6837\u65b9\u5f0f\u548c\u5b58\u50a8\u683c\u5f0f\uff0c\u5c31\u4f1a\u4ea7\u751f\u591a\u79cd YUV \u5b58\u50a8\u65b9\u5f0f\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u57fa\u4e8eYUV420 \u7684\u5b58\u50a8\u65b9\u5f0f\u3002 YUV420P \u548c YUV420SP YUV420P \u662f\u57fa\u4e8e planar \u5e73\u9762\u6a21\u5f0f\u8fdb\u884c\u5b58\u50a8\uff0c\u5148\u5b58\u50a8\u6240\u6709\u7684 Y \u5206\u91cf\uff0c\u7136\u540e\u5b58\u50a8\u6240\u6709\u7684 U \u5206\u91cf\u6216\u8005 V \u5206\u91cf\u3002 \u540c\u6837\uff0cYUV420SP \u4e5f\u662f\u57fa\u4e8e planar \u5e73\u9762\u6a21\u5f0f\u5b58\u50a8\uff0c\u4e0e YUV420P \u7684\u533a\u522b\u5728\u4e8e\u5b83\u7684 U\u3001V \u5206\u91cf\u662f\u6309\u7167 UV \u6216\u8005 VU \u4ea4\u66ff\u987a\u5e8f\u8fdb\u884c\u5b58\u50a8\u3002 YU12 \u548c YU21 YU12 \u548c YV12 \u683c\u5f0f\u90fd\u5c5e\u4e8e YUV 420P \u7c7b\u578b\uff0c\u5373\u5148\u5b58\u50a8 Y \u5206\u91cf\uff0c\u518d\u5b58\u50a8 U\u3001V \u5206\u91cf\uff0c\u533a\u522b\u5728\u4e8e\uff1aYU12 \u662f\u5148 Y \u518d U \u540e V\uff0c\u800c YV12 \u662f\u5148 Y \u518d V \u540e U \u3002 NV21 \u548c NV21 NV12 \u548c NV21 \u683c\u5f0f\u90fd\u5c5e\u4e8e YUV420SP \u7c7b\u578b\u3002\u5b83\u4e5f\u662f\u5148\u5b58\u50a8\u4e86 Y \u5206\u91cf\uff0c\u4f46\u63a5\u4e0b\u6765\u5e76\u4e0d\u662f\u518d\u5b58\u50a8\u6240\u6709\u7684 U \u6216\u8005 V \u5206\u91cf\uff0c\u800c\u662f\u628a UV \u5206\u91cf\u4ea4\u66ff\u8fde\u7eed\u5b58\u50a8\u3002 NV12 \u662f IOS \u4e2d\u6709\u7684\u6a21\u5f0f\uff0c\u5b83\u7684\u5b58\u50a8\u987a\u5e8f\u662f\u5148\u5b58 Y \u5206\u91cf\uff0c\u518d UV \u8fdb\u884c\u4ea4\u66ff\u5b58\u50a8\u3002 NV21 \u662f \u5b89\u5353 \u4e2d\u6709\u7684\u6a21\u5f0f\uff0c\u5b83\u7684\u5b58\u50a8\u987a\u5e8f\u662f\u5148\u5b58 Y \u5206\u91cf\uff0c\u5728 VU \u4ea4\u66ff\u5b58\u50a8\u3002","title":"7.5 YUV\u5b58\u50a8\u683c\u5f0f"},{"location":"android/camera/camera_1/#75-rgbyuv","text":"","title":"7.5 RGB\u548cYUV\u7684\u76f8\u4e92\u8f6c\u5316"},{"location":"android/camera/camera_1/#8-3a","text":"","title":"8. 3A\u7b97\u6cd5"},{"location":"android/camera/camera_1/#81-af","text":"\u76ee\u7684\u662f\u83b7\u5f97\u6e05\u6670\u5ea6\u66f4\u9ad8\u5f97\u56fe\u50cf\u3002\u65b9\u6cd5\u5206\u4e24\u7c7b\uff0c\u4e00\u7c7b\u662f\u4f20\u7edf\u7684\u805a\u7126\u65b9\u6cd5\uff0c\u4e00\u79cd\u662f\u57fa\u4e8e\u6570\u5b57\u56fe\u50cf\u5904\u7406\u65b9\u5f0f\u7684\u56fe\u50cf\u805a\u7126\u65b9\u6cd5\u3002\u4f20\u7edf\u7684\u65b9\u5f0f\u4e2d\uff0c\u81ea\u52a8\u805a\u7126\u901a\u8fc7\u7ea2\u5916\u7ebf\u6216\u8005\u8d85\u751f\u6ce2\u6d4b\u8ddd\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u3002\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u5b89\u88c5\u53d1\u5c04\u673a\u548c\u63a5\u6536\u673a\uff0c\u589e\u52a0\u4e86\u6444\u50cf\u673a\u7684\u6210\u672c\uff0c\u800c\u4e14\u8d85\u58f0\u6ce2\u5bf9\u4e8e\u73bb\u7483\u540e\u9762\u7684\u88ab\u6444\u7269\u4f53\u4e0d\u80fd\u5f88\u597d\u7684\u81ea\u52a8\u805a\u7126\u3002\u8fd9\u4e00\u7c7b\u805a\u7126\u65b9\u5f0f\u5728\u67d0\u4e9b\u573a\u5408\u53d7\u5230\u4e86\u9650\u5236\u3002\u56e0\u6b64\u5728\u65e5\u8d8b\u96c6\u6210\u5316\u3001\u5fae\u578b\u5316\u3001\u4f4e\u6210\u672c\u7684\u5e94\u7528\u4e2d\uff0c\u57fa\u4e8e\u6570\u5b57\u56fe\u50cf\u5904\u7406\u7684\u81ea\u52a8\u805a\u7126\u65b9\u6cd5\u66f4\u5177\u6709\u4f18\u52bf\u3002 \u6839\u636e\u955c\u5934\u6210\u50cf\u5206\u6790\uff0c\u955c\u5934\u7684\u5149\u5b66\u4f20\u9012\u51fd\u6570\u53ef\u4ee5\u8fd1\u4f3c\u4e3a\u9ad8\u65af\u51fd\u6570\uff0c\u5b83\u7684\u4f5c\u7528\u7b49\u6548\u4e3a\u4e00\u4e2a\u4f4e\u901a\u6ee4\u6ce2\u5668\u3002\u79bb\u7126\u91cf\u8d8a\u5927\uff0c\u5149\u5b66\u4f20\u9012\u51fd\u6570\u7684\u622a\u6b62\u9891\u7387\u8d8a\u4f4e\u3002\u4ece\u9891\u57df\u4e0a\u770b\uff0c\u79bb\u7126\u91cf\u589e\u5927\uff0c\u5bf9\u56fe\u50cf\u9ad8\u9891\u80fd\u91cf\u9020\u6210\u635f\u5931\uff0c\u4f7f\u5f97\u56fe\u50cf\u7684\u7ec6\u8282\u9010\u6e10\u6a21\u7cca\u3002\u4ece\u7a7a\u57df\u4e0a\u770b\uff0c\u79bb\u7126\u91cf\u589e\u5927\uff0c\u70b9\u5149\u6e90\u6210\u50cf\u7684\u5149\u5f3a\u5206\u5e03\u51fd\u6570\u8d8a\u5206\u6563\uff0c\u53ef\u5206\u8fa8\u7684\u6210\u50cf\u95f4\u8ddd\u8d8a\u5927\uff0c\u56fe\u50cf\u76f8\u90bb\u50cf\u7d20\u4e92\u76f8\u91cd\u53e0\uff0c\u56fe\u50cf\u7ec6\u8282\u635f\u5931\u4e25\u91cd\u3002\u56e0\u6b64\u56fe\u50cf\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u65f6\u5efa\u7acb\u5728\u56fe\u50cf\u8fb9\u7f18\u9ad8\u9891\u80fd\u91cf\u4e0a\u7684\u3002 \u6570\u5b57\u5904\u7406\u65b9\u6cd5\u4e2d\uff0c\u81ea\u52a8\u805a\u7126\u7684\u5173\u952e\u5728\u4e8e\u6784\u9020\u56fe\u50cf\u7684\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u3002\u5df1\u7ecf\u63d0\u51fa\u7684\u56fe\u50cf\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u82de\u62ec\u7070\u5ea6\u65b9\u5dee\u3001\u68af\u5ea6\u80fd\u91cf\u3001\u5ae1\u51fd\u6570\u548c\u4e00\u4e9b\u9891\u57df\u51fd\u6570\u6cd5\u3002\u56fe\u50cf\u6e05\u6670\u5ea6\u8bc4\u4ef7\u51fd\u6570\u5fc5\u987b\u5177\u6709\u826f\u597d\u7684\u5355\u5cf0\u6027\u548c\u5c16\u9510\u6027\uff0c\u800c\u4e14\u8981\u8ba1\u7b97\u91cf\u9002\u5ea6\uff0c\u4ece\u800c\u53ef\u4ee5\u5feb\u901f\u7684\u5b9e\u73b0\u7cbe\u51c6\u5bf9\u7126\u3002","title":"8.1 AF \u81ea\u52a8\u5bf9\u7126"},{"location":"android/camera/camera_1/#82-ae","text":"\u66dd\u5149\u662f\u7528\u6765\u8ba1\u7b97\u4ece\u666f\u7269\u5230\u8fbe\u76f8\u673a\u7684\u5149\u901a\u91cf\u5927\u5c0f\u7684\u7269\u7406\u91cf\u3002\u56fe\u50cf\u4f20\u611f\u5668\u53ea\u6709\u83b7\u5f97\u6b63\u786e\u7684\u66dd\u5149\uff0c\u624d\u80fd\u5f97\u5230\u9ad8\u8d28\u91cf\u7684\u7167\u7247\u3002\u66dd\u5149\u8fc7\u5ea6\uff0c\u56fe\u50cf\u770b\u8d77\u6765\u592a\u4eae\u66dd\u5149\u4e0d\u8db3\uff0c\u5219\u56fe\u50cf\u770b\u8d77\u6765\u592a\u6697\u3002\u5230\u8fbe\u4f20\u611f\u5668\u7684\u5149\u901a\u91cf\u7684\u5927\u5c0f\u4e3b\u8981\u7531\u4e24\u65b9\u9762\u56e0\u7d20\u51b3\u5b9a\uff1a\u66dd\u5149\u65f6\u95f4\u7684\u957f\u77ed\u4ee5\u53ca\u5149\u5708\u7684\u5927\u5c0f\u3002 \u5229\u7528\u5149\u5708\u8fdb\u884c\u81ea\u52a8\u66dd\u5149\uff0c\u4e3b\u8981\u6839\u636e\u6240\u62cd\u6444\u7684\u573a\u666f\u6765\u63a7\u5236\u5149\u5708\u5927\u5c0f\uff0c\u4f7f\u5f97\u8fdb\u5149\u91cf\u7ef4\u6301\u5728\u4e00\u5b9a\u8303\u56f4\u5185\u3002\u901a\u8fc7\u5149\u5708\u8fdb\u884c\u66dd\u5149\u63a7\u5236\u7684\u6210\u672c\u6bd4\u8f83\u9ad8\u3002\u73b0\u5728\u5e02\u573a\u6240\u89c1\u7684\u4e2d\u4f4e\u7aef\u6444\u50cf\u5934\u91c7\u7528\u7684\u4e3b\u6d41\u6280\u672f\u901a\u8fc7\u8c03\u6574\u66dd\u5149\u65f6\u95f4\u6765\u5b9e\u73b0\u81ea\u52a8\u66dd\u5149\u3002 \u76ee\u524d\u81ea\u52a8\u66dd\u5149\u63a7\u5236\u7b97\u6cd5\u65b9\u6cd5\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u4f7f\u7528\u53c2\u7167\u4eae\u5ea6\u503c\uff0c\u5c06\u56fe\u50cf\u5747\u5300\u5206\u6210\u8bb8\u591a\u7684\u5b50\u56fe\u50cf\uff0c\u6bcf\u4e00\u5757\u5b50\u56fe\u50cf\u7684\u4eae\u5ea6\u88ab\u7528\u6765\u8bbe\u7f6e\u53c2\u7167\u4eae\u5ea6\u503c\uff0c\u8fd9\u4e2a\u4eae\u5ea6\u503c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u5feb\u95e8\u7684\u901f\u5ea6\u6765\u83b7\u5f97\u3002\u53e6\u5916\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u901a\u8fc7\u7814\u7a76\u4e0d\u540c\u5149\u7167\u6761\u4ef6\u4e0b\u7684\u4eae\u5ea6\u4e0e\u66dd\u5149\u503c\u4e4b\u95f4\u7684\u5173\u7cfb\u6765\u8fdb\u884c\u66dd\u5149\u63a7\u5236\u3002\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u7814\u7a76\u4e86\u5927\u91cf\u7684\u56fe\u50cf\u4f8b\u5b50\u548c\u8bb8\u591a\u4e0d\u540c\u7684\u5149\u7167\u6761\u4ef6\u3002\u800c\u4e14\u5747\u9700\u8981\u5728\u4e0d\u540c\u7684\u5149\u7167\u6761\u4ef6\u4e0b\u6240\u91c7\u96c6\u7684\u56fe\u50cf\u6570\u636e\u5e93\u3002\u5b9e\u9645\u4e2d\u81ea\u52a8\u66dd\u5149\u7814\u7a76\u9700\u8981\u89e3\u51b3\u597d\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\uff0c\u9996\u5148\u662f\u5224\u5b9a\u56fe\u50cf\u662f\u5426\u9700\u8981\u81ea\u52a8\u66dd\u5149\uff0c\u5176\u6b21\u662f\u81ea\u52a8\u66dd\u5149\u65f6\uff0c\u5982\u4f55\u8c03\u6574\u5149\u7535\u8f6c\u6362\u540e\u6570\u5b57\u4fe1\u53f7\u6765\u627e\u51fa\u81ea\u52a8\u66dd\u5149\u80fd\u529b\u8865\u507f\u51fd\u6570\uff0c\u6700\u540e\u5c31\u662f\u8c03\u6574\u5230\u4ec0\u4e48\u7a0b\u5ea6\u6700\u4e3a\u5408\u9002\u3002","title":"8.2 AE \u81ea\u52a8\u66dd\u5149"},{"location":"android/camera/camera_1/#83-awb","text":"\u767d\u5e73\u8861\u7684\u57fa\u672c\u539f\u7406\u662f\u5728\u4efb\u610f\u73af\u5883\u4e0b\uff0c \u628a\u767d\u8272\u7269\u4f53\u8fd8\u539f\u6210\u767d\u8272\u7269\u4f53\uff0c \u4e5f\u5c31\u662f\u901a\u8fc7\u627e\u5230\u56fe\u50cf\u4e2d\u7684\u767d\u5757\uff0c \u7136\u540e\u8c03\u6574R/G/B \u7684\u6bd4\u4f8b\uff0c \u5982\u4e0b\u5173\u7cfb\uff1a R\u2019= R * R_Gain G\u2019 = G * G_Gain B\u2019 = B * B_Gain R\u2019 = G\u2019= B\u2019 AWB \u7b97\u6cd5\u901a\u5e38\u5305\u62ec\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a (1)\u8272\u6e29\u7edf\u8ba1\uff1a \u6839\u636e\u56fe\u50cf\u7edf\u8ba1\u51fa\u8272\u6e29\uff1b (2)\u8ba1\u7b97\u901a\u9053\u589e\u76ca\uff1a \u8ba1\u7b97\u51faR \u548cB \u901a\u9053\u7684\u589e\u76ca\uff1b (3)\u8fdb\u884c\u504f\u8272\u7684\u77eb\u6b63\uff1a \u6839\u636e\u7ed9\u51fa\u7684\u589e\u76ca\uff0c \u7b97\u51fa\u504f\u8272\u56fe\u50cf\u7684\u77eb\u6b63\u3002","title":"8.3 AWB \u81ea\u52a8\u767d\u5e73\u8861"},{"location":"android/camera/camera_1/#9","text":"\u804c\u4e1a\uff1a\u963f\u91cc\u5df4\u5df4 - \u65e0\u7ebf\u5f00\u53d1\u4e13\u5bb6\uff0c\u53ef\u5185\u63a8 \u90ae\u4ef6\uff1asunquan9301@163.com WX\uff1asunquan97 \u6dfb\u52a0\u8bf7\u6ce8\u660eCSDN + \u539f\u56e0\uff0c \u6444\u50cf\u5934\u5de5\u4f5c\u539f\u7406 \u21a9 camera\u57fa\u672c\u77e5\u8bc6 \u21a9 \u21a9 \u8be6\u89e3CCD\u548cCMOS\u7684\u533a\u522b\u53ca\u4e3b\u8981\u786c\u4ef6\u6280\u672f\u6307\u6807 \u21a9 ISP\u6d41\u7a0b\u6982\u8ff0 \u21a9 \u21a9 ISPfuncs \u21a9 \u97f3\u89c6\u9891\u5f00\u53d1\u8fdb\u9636\u6307\u5357 \u21a9 \u4e00\u6587\u7406\u89e3 YUV \u21a9","title":"9.\u4e2a\u4eba\u7b80\u4ecb"},{"location":"linux/awk/","text":"\u6df1\u5165\u7406\u89e3awk \u7b80\u4ecb man awk awk NAME awk - pattern-directed scanning and processing language SYNOPSIS awk [ -F fs ] [ -v var=value ] [ 'prog' | -f progfile ] [ file ... ] DESCRIPTION Awk scans each input file for lines that match any of a set of patterns specified literally in prog or in one or more files specified as -f progfile. With each pattern there can be an associated action that will be performed when a line of a file matches the pattern. Each line is matched against the pattern portion of every pattern-action statement; the associated action is performed for each matched pattern. awk \u6700\u65e9\u7531 Alfred V. Aho , Peter J. Weinberger , and Brian W. Kernighan \uff0c\u6700\u65e9\u5199\u4e8e1977\u5e74\u3002 awk is a programming language. Benchmarks bbs_list each row is a computer bulletin board phone number baud rate a code . aardvark 555-5553 1200/300 B alpo-net 555-3412 2400/1200/300 A barfly 555-7685 1200/300 A bites 555-1675 2400/1200/300 A camelot 555-0542 300 C core 555-2912 1200/300 C fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sdace 555-3430 2400/1200/300 A sabafoo 555-2127 1200/300 C inventory-shipped each row is year green crates shipped red boxes shipped orange bags shipped blue packages shipped Jan 13 25 15 115 Feb 15 32 24 226 Mar 15 24 34 228 Apr 31 52 63 420 May 16 34 29 208 Jun 31 42 75 492 Jul 24 34 67 436 Aug 15 34 47 316 Sep 13 55 37 277 Oct 29 54 68 525 Nov 20 87 82 577 Dec 17 35 61 401 Jan 21 36 64 620 Feb 26 58 80 652 Mar 24 75 70 495 Apr 21 70 74 514 e1. find lines contain foo MacBook-Pro-3:benchmarks sunquan$ awk '/foo/{print $0}' bbs_list fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sabafoo 555-2127 1200/300 C /foo/ \uff1apattern {print $0} \uff1aaction e2. find lines contain 12 or 21 str MacBook-Pro-3:benchmarks sunquan$ awk '/12/{print $0}/21/{print $0}' bbs_list inventory-shipped aardvark 555-5553 1200/300 B alpo-net 555-3412 2400/1200/300 A barfly 555-7685 1200/300 A bites 555-1675 2400/1200/300 A core 555-2912 1200/300 C fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sdace 555-3430 2400/1200/300 A sabafoo 555-2127 1200/300 C sabafoo 555-2127 1200/300 C Jan 21 36 64 620 Apr 21 70 74 514 if a line contains both strings, it is printed twice\uff0conce by each rule. e3. \u7edf\u8ba1\u5f53\u524d\u76ee\u5f55\u4e0b7\u6708\u4efd\u66f4\u6539\u7684\u6587\u4ef6size\u603b\u548c MacBook-Pro-3:benchmarks sunquan$ ls -l total 16 -rw-r--r-- 1 sunquan staff 484 7 13 11:05 bbs_list -rw-r--r-- 1 sunquan staff 320 7 13 11:22 inventory-shipped MacBook-Pro-3:benchmarks sunquan$ ls -l | awk '$6 == \"7\" {sum += $5} END {print sum}' 804 MacBook-Pro-3:benchmarks sunquan$ Program You write an awk program that consists of a series of rules to tell awk what to do awk \u63a5\u53d7\u6587\u4ef6\uff0c\u6309\u884c\u68c0\u7d22\u662f\u5426\u5339\u914d\u7a0b\u5e8f\u4e2d\u7684\u89c4\u5219\u3002 \u5982\u679c\u67d0\u884c\u5339\u914d\u67d0\u4e2a\u89c4\u5219\uff0c\u5219\u6267\u884c\u8be5\u89c4\u5219\u540e\u7684action\uff0c\u76f4\u5230\u6700\u540e\u4e00\u884c Program format awk \u2018program\u2019 input-file1 input-file2 awk -f program-file input-file1 input-file2 program like pattern { action } pattern { action } \u2026 Record awk\u4f1a\u628a\u8f93\u5165\u6587\u4ef6\u7684\u5185\u5bb9\u5212\u5206\u4e3a\u4e00\u4e2a\u4e2a record \u3002\u901a\u8fc7\u5185\u7f6e\u7684 RS \u53d8\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3a \\n awk '{ print $0 } RS=\"/\" bbs_list or awk \u2019BEGIN { RS = \"/\" } ; { print $0 }\u2019 bbs_list Field record \u4f1a\u81ea\u52a8\u88ab\u89e3\u6790\u4e3a\u591a\u4e2a field \uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 $ \u6765\u5f15\u7528 field \u3002 This seems like a pretty nice example $1 \uff1aThis e4. \u8ba1\u7b97 awk '{ total = ($5 + $4 + $3 + $2) ; print total }' inventory-shipped \u5185\u7f6e\u53d8\u91cf\u8bf4\u660e \u672f\u8bed \u89e3\u91ca \u7528\u6cd5 RS record\u5206\u9694\u7b26 awk \u2018{ print $0 } RS=\u201d/\u201d bbs_list $NF \u6700\u540e\u4e00\u4e2afield awk \u2018$1 ~ /foo/ {print $1,$NF}\u2019 bbs_list $0 \u5f53\u524drecord awk \u2018{print $0}\u2019 bbs_list NF the number of fields awk \u2018END {print \u201cthe num of fields is \u201d NF}\u2019 bbs_list NR line num awk \u2018{print NR , $0}\u2019 bbs_list FS field\u5206\u9694\u7b26 awk \u2018BEGIN {FS = \u201c/\u201d} ; {print $1}\u2019 bbs_list \u4f7f\u7528-F-\u6307\u5b9aFS awk -F- \u2018{print $1}\u2019 bbs_list OFS \u8f93\u51faField\u5206\u9694\u7b26 ORS \u8f93\u51faRecord\u5206\u9694\u7b26 awk \u2018BEGIN { OFS = \u201c;\u201d ; ORS = \u201c\\n\\n\u201d } ; {print $1, $2}\u2019 bbs_list > \u8f93\u51fa\u5230\u6587\u4ef6\u4e2d awk \u2018BEGIN {OFS = \u201c;\u201d} ; {print $1, $2 > \u201cresult\u201d}\u2019 bbs_list Patterns \u672f\u8bed \u89e3\u91ca awk\u7528\u6cd5 exp ~ /regexp/ record\u5206\u9694\u7b26 awk \u2018$3 ~ /200/ {print $1, $3}\u2019 bbs_list exp !~ /regexp/ \u6700\u540e\u4e00\u4e2afield awk \u2018$3 !~ /200/ {print $1, $3}\u2019 bbs_list < <= > >= == != ~ !~ Comparison Expressions awk \u2018$1 ~ /foo/ {print $1}\u2019 bbs_list && || ! Boolean Operators awk \u2018$1 ~ /foo/ && $3 ~ 300 {print $1, $3}\u2019 bbs_list BEGIN \u5f00\u5934 END \u7ed3\u5c3e Empty Pattern \u5339\u914d\u4efb\u4f55\u4e00\u884c awk \u2019{ print $1 }\u2019 BBS-list Action Expressions as Action \u672f\u8bed \u89e3\u91ca awk\u7528\u6cd5 \\\\ \\a \\b \\f \\n \\r \\t Constant Expressions awk \u2018BEGIN {print \u201chello \\n world\u201d}\u2019 bbs_list var=text Variable awk \u2018{print $var}\u2019 var=1 bbs_list x opt y Opt awk \u2018{ total = $2 + $3 / $4 ; print total}\u2019 inventory-shipped fun(args) invoke funs awk \u2018BEGIN {result = rand() ; print result}\u2019 bbs_list Control Statement in Action \u672f\u8bed \u89e3\u91ca awk\u7528\u6cd5 if (cod) then-body else else-body If else awk \u2018{if ($2 % 2 == 0) print $2 \u201cis evel\u201d ; else print $2 \u201cis odd\u201d}\u2019 inventory-shipped while (cod) body while #! /usr/bin/awk -f { i = 1 while (i <= 3){ print $i i++ } } for (initialization; condition; increment) body for awk \u2018{ for (i=1; i<=3; i++) print $i }\u2019 bbs_list break continue next stop cur record, go to next record. Array in Awk Arr in awk looks like map\u3002 array [index ] to get a value array[subscript] = value to put a value you don\u2019t need to init size for arr #! /usr/bin/awk -f { if ($1 > max) max = $1 arr[$1] = $0 } END{ for (x = 1; x <= max; x++) print arr[x] } ## input data 5 IamtheFiveman 2 Who are you? The new number two! 4 ...Andfouronthefloor 1 Who is number one? 3 I three you. ## output result 1 Who is number one? 2 Who are you? The new number two! 3 I three you. 4 ...Andfouronthefloor 5 IamtheFiveman e5. awk scripts\uff1ahello world MacBook-Pro-3:shell sunquan$ which awk /usr/bin/awk # demo: awkHelloWorld #! /usr/bin/awk -f BEGIN {print \"hello, world\"} MacBook-Pro-3:shell sunquan$ awkHelloWorld \"hello, world\" Func in Awk #! /usr/bin/awk -f #file name is awkHelloWorld function myFunc (win) { print \"the value is \" , win } function doBefore (){ print \"hello world\" } function doLast (){ print \"the num of lines is \", NR } BEGIN {doBefore()} ; {myFunc($1)} ; END {doLast()} # result awkHelloWorld benchmarks/bbs_list hello world the value is aardvark the value is alpo-net the value is barfly the value is bites the value is camelot the value is core the value is fooey the value is foot the value is macfoo the value is sdace the value is sabafoo the num of lines is 11","title":"\u6df1\u5165\u7406\u89e3Awk"},{"location":"linux/awk/#_1","text":"man awk awk NAME awk - pattern-directed scanning and processing language SYNOPSIS awk [ -F fs ] [ -v var=value ] [ 'prog' | -f progfile ] [ file ... ] DESCRIPTION Awk scans each input file for lines that match any of a set of patterns specified literally in prog or in one or more files specified as -f progfile. With each pattern there can be an associated action that will be performed when a line of a file matches the pattern. Each line is matched against the pattern portion of every pattern-action statement; the associated action is performed for each matched pattern. awk \u6700\u65e9\u7531 Alfred V. Aho , Peter J. Weinberger , and Brian W. Kernighan \uff0c\u6700\u65e9\u5199\u4e8e1977\u5e74\u3002 awk is a programming language.","title":"\u7b80\u4ecb"},{"location":"linux/awk/#benchmarks","text":"","title":"Benchmarks"},{"location":"linux/awk/#bbs_list","text":"each row is a computer bulletin board phone number baud rate a code . aardvark 555-5553 1200/300 B alpo-net 555-3412 2400/1200/300 A barfly 555-7685 1200/300 A bites 555-1675 2400/1200/300 A camelot 555-0542 300 C core 555-2912 1200/300 C fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sdace 555-3430 2400/1200/300 A sabafoo 555-2127 1200/300 C","title":"bbs_list"},{"location":"linux/awk/#inventory-shipped","text":"each row is year green crates shipped red boxes shipped orange bags shipped blue packages shipped Jan 13 25 15 115 Feb 15 32 24 226 Mar 15 24 34 228 Apr 31 52 63 420 May 16 34 29 208 Jun 31 42 75 492 Jul 24 34 67 436 Aug 15 34 47 316 Sep 13 55 37 277 Oct 29 54 68 525 Nov 20 87 82 577 Dec 17 35 61 401 Jan 21 36 64 620 Feb 26 58 80 652 Mar 24 75 70 495 Apr 21 70 74 514","title":"inventory-shipped"},{"location":"linux/awk/#e1-find-lines-contain-foo","text":"MacBook-Pro-3:benchmarks sunquan$ awk '/foo/{print $0}' bbs_list fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sabafoo 555-2127 1200/300 C /foo/ \uff1apattern {print $0} \uff1aaction","title":"e1. find lines contain foo"},{"location":"linux/awk/#e2-find-lines-contain-12-or-21-str","text":"MacBook-Pro-3:benchmarks sunquan$ awk '/12/{print $0}/21/{print $0}' bbs_list inventory-shipped aardvark 555-5553 1200/300 B alpo-net 555-3412 2400/1200/300 A barfly 555-7685 1200/300 A bites 555-1675 2400/1200/300 A core 555-2912 1200/300 C fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sdace 555-3430 2400/1200/300 A sabafoo 555-2127 1200/300 C sabafoo 555-2127 1200/300 C Jan 21 36 64 620 Apr 21 70 74 514 if a line contains both strings, it is printed twice\uff0conce by each rule.","title":"e2. find lines contain 12 or 21 str"},{"location":"linux/awk/#e3-7size","text":"MacBook-Pro-3:benchmarks sunquan$ ls -l total 16 -rw-r--r-- 1 sunquan staff 484 7 13 11:05 bbs_list -rw-r--r-- 1 sunquan staff 320 7 13 11:22 inventory-shipped MacBook-Pro-3:benchmarks sunquan$ ls -l | awk '$6 == \"7\" {sum += $5} END {print sum}' 804 MacBook-Pro-3:benchmarks sunquan$","title":"e3. \u7edf\u8ba1\u5f53\u524d\u76ee\u5f55\u4e0b7\u6708\u4efd\u66f4\u6539\u7684\u6587\u4ef6size\u603b\u548c"},{"location":"linux/awk/#program","text":"You write an awk program that consists of a series of rules to tell awk what to do awk \u63a5\u53d7\u6587\u4ef6\uff0c\u6309\u884c\u68c0\u7d22\u662f\u5426\u5339\u914d\u7a0b\u5e8f\u4e2d\u7684\u89c4\u5219\u3002 \u5982\u679c\u67d0\u884c\u5339\u914d\u67d0\u4e2a\u89c4\u5219\uff0c\u5219\u6267\u884c\u8be5\u89c4\u5219\u540e\u7684action\uff0c\u76f4\u5230\u6700\u540e\u4e00\u884c","title":"Program"},{"location":"linux/awk/#program-format","text":"awk \u2018program\u2019 input-file1 input-file2 awk -f program-file input-file1 input-file2 program like pattern { action } pattern { action } \u2026","title":"Program format"},{"location":"linux/awk/#record","text":"awk\u4f1a\u628a\u8f93\u5165\u6587\u4ef6\u7684\u5185\u5bb9\u5212\u5206\u4e3a\u4e00\u4e2a\u4e2a record \u3002\u901a\u8fc7\u5185\u7f6e\u7684 RS \u53d8\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3a \\n awk '{ print $0 } RS=\"/\" bbs_list or awk \u2019BEGIN { RS = \"/\" } ; { print $0 }\u2019 bbs_list","title":"Record"},{"location":"linux/awk/#field","text":"record \u4f1a\u81ea\u52a8\u88ab\u89e3\u6790\u4e3a\u591a\u4e2a field \uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 $ \u6765\u5f15\u7528 field \u3002 This seems like a pretty nice example $1 \uff1aThis","title":"Field"},{"location":"linux/awk/#e4","text":"awk '{ total = ($5 + $4 + $3 + $2) ; print total }' inventory-shipped","title":"e4. \u8ba1\u7b97"},{"location":"linux/awk/#_2","text":"\u672f\u8bed \u89e3\u91ca \u7528\u6cd5 RS record\u5206\u9694\u7b26 awk \u2018{ print $0 } RS=\u201d/\u201d bbs_list $NF \u6700\u540e\u4e00\u4e2afield awk \u2018$1 ~ /foo/ {print $1,$NF}\u2019 bbs_list $0 \u5f53\u524drecord awk \u2018{print $0}\u2019 bbs_list NF the number of fields awk \u2018END {print \u201cthe num of fields is \u201d NF}\u2019 bbs_list NR line num awk \u2018{print NR , $0}\u2019 bbs_list FS field\u5206\u9694\u7b26 awk \u2018BEGIN {FS = \u201c/\u201d} ; {print $1}\u2019 bbs_list \u4f7f\u7528-F-\u6307\u5b9aFS awk -F- \u2018{print $1}\u2019 bbs_list OFS \u8f93\u51faField\u5206\u9694\u7b26 ORS \u8f93\u51faRecord\u5206\u9694\u7b26 awk \u2018BEGIN { OFS = \u201c;\u201d ; ORS = \u201c\\n\\n\u201d } ; {print $1, $2}\u2019 bbs_list > \u8f93\u51fa\u5230\u6587\u4ef6\u4e2d awk \u2018BEGIN {OFS = \u201c;\u201d} ; {print $1, $2 > \u201cresult\u201d}\u2019 bbs_list","title":"\u5185\u7f6e\u53d8\u91cf\u8bf4\u660e"},{"location":"linux/awk/#patterns","text":"\u672f\u8bed \u89e3\u91ca awk\u7528\u6cd5 exp ~ /regexp/ record\u5206\u9694\u7b26 awk \u2018$3 ~ /200/ {print $1, $3}\u2019 bbs_list exp !~ /regexp/ \u6700\u540e\u4e00\u4e2afield awk \u2018$3 !~ /200/ {print $1, $3}\u2019 bbs_list < <= > >= == != ~ !~ Comparison Expressions awk \u2018$1 ~ /foo/ {print $1}\u2019 bbs_list && || ! Boolean Operators awk \u2018$1 ~ /foo/ && $3 ~ 300 {print $1, $3}\u2019 bbs_list BEGIN \u5f00\u5934 END \u7ed3\u5c3e Empty Pattern \u5339\u914d\u4efb\u4f55\u4e00\u884c awk \u2019{ print $1 }\u2019 BBS-list","title":"Patterns"},{"location":"linux/awk/#action","text":"","title":"Action"},{"location":"linux/awk/#expressions-as-action","text":"\u672f\u8bed \u89e3\u91ca awk\u7528\u6cd5 \\\\ \\a \\b \\f \\n \\r \\t Constant Expressions awk \u2018BEGIN {print \u201chello \\n world\u201d}\u2019 bbs_list var=text Variable awk \u2018{print $var}\u2019 var=1 bbs_list x opt y Opt awk \u2018{ total = $2 + $3 / $4 ; print total}\u2019 inventory-shipped fun(args) invoke funs awk \u2018BEGIN {result = rand() ; print result}\u2019 bbs_list","title":"Expressions as Action"},{"location":"linux/awk/#control-statement-in-action","text":"\u672f\u8bed \u89e3\u91ca awk\u7528\u6cd5 if (cod) then-body else else-body If else awk \u2018{if ($2 % 2 == 0) print $2 \u201cis evel\u201d ; else print $2 \u201cis odd\u201d}\u2019 inventory-shipped while (cod) body while #! /usr/bin/awk -f { i = 1 while (i <= 3){ print $i i++ } } for (initialization; condition; increment) body for awk \u2018{ for (i=1; i<=3; i++) print $i }\u2019 bbs_list break continue next stop cur record, go to next record.","title":"Control Statement in Action"},{"location":"linux/awk/#array-in-awk","text":"Arr in awk looks like map\u3002 array [index ] to get a value array[subscript] = value to put a value you don\u2019t need to init size for arr #! /usr/bin/awk -f { if ($1 > max) max = $1 arr[$1] = $0 } END{ for (x = 1; x <= max; x++) print arr[x] } ## input data 5 IamtheFiveman 2 Who are you? The new number two! 4 ...Andfouronthefloor 1 Who is number one? 3 I three you. ## output result 1 Who is number one? 2 Who are you? The new number two! 3 I three you. 4 ...Andfouronthefloor 5 IamtheFiveman","title":"Array in Awk"},{"location":"linux/awk/#e5-awk-scriptshello-world","text":"MacBook-Pro-3:shell sunquan$ which awk /usr/bin/awk # demo: awkHelloWorld #! /usr/bin/awk -f BEGIN {print \"hello, world\"} MacBook-Pro-3:shell sunquan$ awkHelloWorld \"hello, world\"","title":"e5. awk scripts\uff1ahello world"},{"location":"linux/awk/#func-in-awk","text":"#! /usr/bin/awk -f #file name is awkHelloWorld function myFunc (win) { print \"the value is \" , win } function doBefore (){ print \"hello world\" } function doLast (){ print \"the num of lines is \", NR } BEGIN {doBefore()} ; {myFunc($1)} ; END {doLast()} # result awkHelloWorld benchmarks/bbs_list hello world the value is aardvark the value is alpo-net the value is barfly the value is bites the value is camelot the value is core the value is fooey the value is foot the value is macfoo the value is sdace the value is sabafoo the num of lines is 11","title":"Func in Awk"},{"location":"linux/shell/","text":"\u6df1\u5165\u7406\u89e3Shell\u811a\u672c \u4e00.Shell\u80cc\u666f 1.1 GNU\u8ba1\u5212 The GNU Project is a free software, mass collaboration project that Richard Stallman announced on September 27, 1983. Its goal is to give computer users freedom and control in their use of their computers and computing devices by collaboratively developing and publishing software that gives everyone the rights to freely run the software, copy and distribute it, study it, and modify it. GNU software grants these rights in its license. 1984\u5e74\uff0c\u53f2\u6258\u66fc\u5f00\u59cb GNU \u8ba1\u5212\uff0c \u8fd9\u4e2a\u8ba1\u5212\u7684\u76ee\u7684\u662f:\u521b\u5efa\u4e00\u4e2a\u81ea\u7531\u3001\u5f00\u653e\u7684Unix\u64cd\u4f5c\u7cfb\u7edf (Free Unix)\u3002 GNU's not Unix! GNU\u5e76\u4e0d\u662f Unix\u554a!\u90a3\u4e48GNU\u53c8\u662f\u4ec0\u4e48\u5462? \u5c31\u662fGNU's Not Unix\u561b!.....\u53ef\u662f\u65e0\u7a77\u5faa\u73af\u554a!\u5fd9\u788c~ \u672c\u7ae0\u6240\u8bf4\u7684Bash Shell\u5c31\u662f\u6765\u6e90\u4e8eGNU\uff0c\u8fd8\u6709\u4e00\u4e9b\u6bd4\u8f83\u8457\u540d\u7684\u8f6f\u4ef6\u6765\u6e90\u4e8eGNU\uff1a Emacs GNU C (GCC) GNU C Library (glibc) Bash shell In 1991, the Linux kernel appeared, developed outside the GNU project by Linus Torvalds, and in December 1992 it was made available under version 2 of the GNU General Public License. Combined with the operating system utilities already developed by the GNU project, it allowed for the first operating system that was free software, commonly known as Linux. 1.2 Shell \u6211\u4eec\u5fc5\u987b\u8981\u901a\u8fc7\u201c Shell \u201d\u5c06\u6211\u4eec\u8f93\u5165\u7684\u6307\u4ee4\u4e0e Kernel \u6c9f\u901a\uff0c \u597d\u8ba9 Kernel \u53ef\u4ee5\u63a7\u5236\u786c\u4ef6\u6765\u6b63\u786e\u65e0\u8bef\u7684\u5de5\u4f5c\u3002 \u53ef\u4ee5\u53d1\u73b0\u5e94\u7528\u7a0b\u5e8f\u5176\u5b9e\u662f\u5728\u6700\u5916\u5c42\uff0c\u5982\u540c\u9e21\u86cb\u5916\u58f3\u4e00\u6837\uff0c\u56e0\u6b64\u5c31\u88ab\u79f0\u547c\u4e3a\u58f3\u7a0b\u5e8f (shell) \u5570! \u72ed\u4e49\uff1a\u547d\u4ee4\u884c\u65b9\u9762\u7684\u8f6f\u4ef6\uff0c bash \u7b49\u3002 \u5e7f\u4e49\uff1a\u56fe\u5f62\u63a5\u53e3\u7684\u8f6f\u4ef6!\u56e0\u4e3a\u56fe\u5f62\u63a5\u53e3\u5176\u5b9e\u4e5f\u80fd\u591f\u64cd\u4f5c\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u6765\u8c03\u7528\u6838\u5fc3\u5de5\u4f5c\u554a! Shell \u6709\u5f88\u591a\u7248\u672c\u4f8b\u5982\u5e38\u542c\u5230\u7684 Bourne SHell (sh) \u3001\u5728 Sun \u91cc\u5934\u9ed8\u8ba4\u7684 C SHell \uff0c\u8fd8\u6709 TCSH \uff0c zsh \u7b49\u7b49\uff0c\u6bcf\u4e00\u79cd Shell \u90fd\u5404\u6709\u5176\u7279\u70b9\u3002 Bash Shell \u662f Bourne Shell \u7684\u589e\u5f3a\u7248\u672c\uff0c\u4e5f\u662f\u57fa\u51c6\u4e8e GNU \u7684\u67b6\u6784\u4e0b\u53d1\u5c55\u51fa\u6765\u7684! \u5728\u4f60\u7684Mac\u7535\u8111\u4e2d\u6709\u591a\u5c11\u53ef\u4f7f\u7528\u7684 Shells \u5462\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\uff1a MacBook-Pro-3:~ sunquan$ cat -n /etc/shells 1 # List of acceptable shells for chpass(1). 2 # Ftpd will not allow users to connect who are not using 3 # one of these shells. 4 5 /bin/bash 6 /bin/csh 7 /bin/dash 8 /bin/ksh 9 /bin/sh 10 /bin/tcsh 11 /bin/zsh MacBook-Pro-3:~ sunquan$ 1.3 Bash \u800c\u5f53\u4e0b\u65e5\u5e38\u5927\u591a\u6570\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f Bash Shell \u3002\u6211\u4eec\u53ef\u4ee5\u5728\u7535\u8111\u4e2d man bash \u4e00\u4e0b MacBook-Pro-3:~ sunquan$ man bash BASH(1) BASH(1) NAME bash - GNU Bourne-Again SHell SYNOPSIS bash [options] [file] COPYRIGHT Bash is Copyright (C) 1989-2005 by the Free Software Foundation, Inc. DESCRIPTION Bash is an sh-compatible command language interpreter that executes commands read from the standard input or from a file. Bash also incor- porates useful features from the Korn and C shells (ksh and csh). Bash is intended to be a conformant implementation of the Shell and Utilities portion of the IEEE POSIX specification (IEEE Standard 1003.1). Bash can be configured to be POSIX-conformant by default. Bash is a Unix shell and command language written by Brian Fox for the GNU Project as a free software replacement for the Bourne shell. First released in 1989, it has been used as the default login shell for most Linux distributions. \u65e9\u57281989\u5e74\u5c31\u53d1\u5e03\u4e86 Bash \uff0c\u88ab\u7528\u6765\u64cd\u4f5c\u64cd\u4f5c\u7cfb\u7edf\u7684\u57fa\u672c\u63a5\u53e3\u3002\u90a3 Bash \u6709\u54ea\u4e9b\u4f18\u70b9\u5462\uff1a 1.\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55\u529f\u80fd \u7528\u6237\u53ef\u4ee5\u5728\u547d\u4ee4\u7ec8\u7aef\u4e2d\u901a\u8fc7\u4e0a\u4e0b\u7bad\u5934\u952e\u6765\u5207\u6362\u5386\u53f2\u4f7f\u7528\u7684\u547d\u4ee4\uff0c\u5728 ~/.bash_history \u91cc\u8bb0\u5f55\u4e86\u4f7f\u7528\u8fc7\u7684 bash \u547d\u4ee4 MacBook-Pro-3:~ sunquan$ tail -n 10 ~/.bash_history vim awkDemo2 diff awkDemo awkDemo2 eixt (0) | echo $? eixt (0) ; echo $? var = sq ; echo $var var=sq;echo $var exit 0;echo $var 2.\u547d\u4ee4\u8865\u5168\u529f\u80fd \u901a\u8fc7Tab\u952e\u53ef\u8fdb\u884c\u547d\u4ee4\u8865\u5168\u548c\u6587\u4ef6\u8865\u5168 3.alase \u522b\u540d\u8bbe\u7f6e MacBook-Pro-3:~ sunquan$ ls -l total 32 drwx------@ 6 sunquan staff 192 5 27 2020 Applications ... MacBook-Pro-3:~ sunquan$ alias ll='ls -l' MacBook-Pro-3:~ sunquan$ ll total 32 drwx------@ 6 sunquan staff 192 5 27 2020 Applications MacBook-Pro-3:~ sunquan$ 4.\u7a0b\u5e8f\u5316\u811a\u672c: (shell scripts) \u53ef\u901a\u8fc7\u5199shell\u811a\u672c\uff0c\u6c47\u96c6\u547d\u4ee4\u6784\u5efa\u66f4\u591a\u7684\u529f\u80fd \u4e8c. Shell\u811a\u672c\u57fa\u672c\u8bed\u6cd5 2.1 Getting Start 1. Introduction shell script \u662f\u5229\u7528 shell \u7684\u529f\u80fd\u6240\u5199\u7684\u4e00\u4e2a\u201c\u7a0b\u5e8f (program)\u201d\uff0c\u8fd9\u4e2a\u7a0b\u5e8f\u662f\u4f7f\u7528\u7eaf\u6587\u672c\u6587\u4ef6\u3002\u4e5f\u53ef\u88ab\u770b\u6210\u6279\u5904\u7406\u6587\u4ef6\u6216\u4e00\u4e2a\u7a0b\u5e8f\u8bed\u8a00\uff0c\u4e14\u7531\u4e8e\u90fd\u662f\u5229\u7528 shell \u4e0e\u76f8\u5173\u5de5\u5177\u6307\u4ee4\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u7f16\u8bd1\u5373\u53ef\u6267\u884c\u3002 2. Setting up Workspace MacBook-Pro-3:~ sunquan$ vim ~/.bash_profile export HISTFILESIZE=1024 #\u8bbe\u7f6ehistory\u8bb0\u5f55bash\u547d\u4ee4\u7684\u5927\u5c0f export PATH=${PATH}:/Users/sunquan/Library/shell #shell\u5de5\u4f5c\u7a7a\u95f4 export PATH=${PATH}:/usr/local/bin export PATH=$PATH:/Users/sunquan/Library/Android/android-ndk-r18b/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/ export WORKON_HOME=$HOME/.virtualenvs export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python3 source /Library/Frameworks/Python.framework/Versions/3.7/bin/virtualenvwrapper.sh # Setting PATH for Python 3.7 # The original version is saved in .bash_profile.pysave PATH=\"/Library/Frameworks/Python.framework/Versions/3.7/bin:${PATH}\" export PATH MacBook-Pro-3:~ sunquan$ source ~/.bash_profile \u6211\u81ea\u5df1\u7684shell\u811a\u672c\u5b58\u653e\u5728 /Users/sunquan/Library/shell \u4e0b\uff0c\u914d\u7f6e\u5230\u7cfb\u7edf\u7684PATH\u91cc\uff0c\u5f53\u4f7f\u7528\u65f6\u811a\u672c\u547d\u4ee4\u65f6\uff0c\u7cfb\u7edf\u53ef\u81ea\u52a8\u5728\u8be5\u76ee\u5f55\u4e0b\u627e\u5230\u76f8\u5173\u547d\u4ee4\u5e76\u6267\u884c\u3002 3. Hello World #! /bin/bash # author: scott sun # #!\u662f\u4e00\u4e2a\u7ea6\u5b9a\u7684\u6807\u8bb0\uff0c\u544a\u8bc9\u811a\u672c\u7528\u4ec0\u4e48shell\u73af\u5883\u6765\u6267\u884c # a program to show \"hello world\" in your screen # how to run : switch the dir # chmod +x helloworld # ./helloworld; if your add the scripts dir in your PATH variable, you can run helloworld directly echo \"Hello World\" exit 0 \u7b2c\u4e00\u884c #!/bin/bash \u5ba3\u544a\u8fd9\u4e2ascript\u4f7f\u7528\u7684 shell \u540d\u79f0\uff0c\u5fc5\u987b\u8981\u5305\u542b\u3002\u5f53\u8fd9\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u7684\u4ee5\u540e\uff0c\u5c31\u80fd\u591f\u8f7d\u5165bash\u7684\u76f8\u5173\u73af\u5883\u914d\u7f6e\u6587\u4ef6\u3002 \u4e00\u4e2a\u6307\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u53ef\u4ee5\u4f7f\u7528 $? \u8fd9\u4e2a\u53d8\u91cf\u6765\u89c2\u5bdf\u3002\u56e0\u6b64 exit 0 \u4ee3\u8868\u79bb\u5f00 script \u540e\u56de\u4f20\u4e00\u4e2a 0 \u7ed9\u7cfb\u7edf\u3002\u968f\u540e\u5982\u679c\u4e0b\u8fbe echo $? \u5219\u53ef\u5f97\u52300\u7684\u503c 4. Motivation Example #!/bin/bash #author : scott sun #function: use to count how much commands in your computer. IFS=\":\" count=0; nonex=0 for directory in $PATH ; do if [ -d \"$directory\" ] then for command in \"$directory\"/* ; do if [ -x \"$command\" ] then count=$[count + 1] else nonex=$[nonex + 1] fi done fi done echo \"$count commands, and $nonex that weren't executable\" exit 0 MacBook-Pro-3:shell sunquan$ countShellCommands 2438 commands, and 14 that weren't executable MacBook-Pro-3:shell sunquan$ 2.2 Variable \u5b9a\u4e49\u53d8\u91cf\uff1a myname=\"sq\" \u53d8\u91cf\u540d\u4e0d\u80fd\u6709\u7a7a\u683c \u82f1\u6587\u5b57\u6bcd\uff0c\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\uff0c\u4e0d\u80fd\u4f7f\u7528 bash \u5173\u952e\u5b57 \u4f7f\u7528\u53d8\u91cf myname=\"sq\" echo $myname echo ${myname} echo \"my name is ${myname}\" 2.3 Data Type #!/bin/bash vint=1 vint2=2 vfloat=1.1 vString=\"sq\" echo \"int add int is $[ vint + vint2 ]\" echo \"int add float is $[ vint + vfloat ]\" echo \"int add string $[ vint + vString ]\" MacBook-Pro-3:shell sunquan$ variableDemo int add int is 3 /Users/sunquan/Library/shell/variableDemo: line 8: 1.1: syntax error: invalid arithmetic operator (error token is \".1\") int add string 1 MacBook-Pro-3:shell sunquan$ 1. shell\u6ca1\u6709\u660e\u786e\u7684\u5173\u952e\u5b57\u5b9a\u4e49\u6570\u636e\u7c7b\u578b 2. \u76f8\u540c\u7c7b\u578b\u7684\u53ef\u76f8\u52a0\uff0c\u5426\u5219\u62a5\u9519 3. \u6574\u5f62\u548c\u5b57\u7b26\u4e32\u4e0d\u80fd\u76f8\u52a0 2.4 String #!/bin/bash myname=\"scott.sun\" echo \"hello my name is $myname\" echo 'hello, my name is $myname' echo \"the length of $myname is ${#myname}\" echo \"substring(1,3) is ${myname:1:3}\" echo \"the first name is \"; eval \"echo $myname | cut -c1-5\" \u5355\u5f15\u53f7\u539f\u6837\u8f93\u51fa\uff0c\u53cc\u5f15\u53f7\u53ef\u663e\u793a\u53d8\u91cf ${#string} \u8f93\u51fa\u5b57\u7b26\u4e32\u957f\u5ea6 ${string:start:end} \u622a\u53d6\u5b57\u7b26\u4e32 2.5 Array #!/bin/bash array=( 1 2 3 4 5 ) echo $array echo ${array[0]} echo ${array[5]} echo \"the length of arr is ${#array[*]}\" echo \"the content of array is ${array[*]}\" echo \"the content of array is ${array[@]}\" MacBook-Pro-3:shell sunquan$ arrayDemo 1 1 the length of arr is 5 the content of array is 1 2 3 4 5 the content of array is 1 2 3 4 5 ${array[*]} , ${array[@]) \u529f\u80fd\u96f7\u540c 2.6 Conditional Statements 1. if else if [ -x \"/path/filename\" ] then echo \"this file can execute\" else echo \"this file can't execute\" fi 2. switch case #!/bin/bash echo \"input the num between 1-4\" read num case $num in 1) echo \"the num is 1\" ;; 2) echo \"the num is 2\" ;; 3) echo \"the num is 3\" ;; 4) echo \"the num is 4\" ;; *) echo \"the num is out of 1-4\" ;; esac 2.7 Looping 1. while #!/bin/bash cnt=1 while(( $cnt<=5 )) do echo $cnt let \"cnt++\" done let \u7528\u4e8e\u6267\u884c\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8868\u8fbe\u5f0f\u4e0d\u9700\u8981 $ \u7b26\u53f7 2. for #!/bin/bash for loop in 1 2 3 4 5 do echo \"The value is $loop\" done 3. \u65e0\u9650\u5faa\u73af for (( ; ; )) 2.8 \u57fa\u672c\u8fd0\u7b97 # + - * / % # == != -eq -ne -gt -lt -ge -le # ! -o -a (\u975e\u6216\u4e0e\uff09 # -z \u5b57\u7b26\u4e32\u957f\u5ea6\u662f\u5426\u4e3a0 # -n \u5b57\u7b26\u4e32\u957f\u5ea6\u662f\u5426\u90e8\u4f4d0 # $ \u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u7a7a echo $[ 1 + 2 ] # -r -w -f -d -x -e # \u53ef\u8bfb\uff0c \u53ef\u5199 \u666e\u901a\u6587\u4ef6 \u662f\u5426\u76ee\u5f55 \u662f\u5426\u53ef\u6267\u884c \u662f\u5426\u5b58\u5728 if [ -r $file ] then echo \"\u6587\u4ef6\u53ef\u8bfb\" else echo \"\u6587\u4ef6\u4e0d\u53ef\u8bfb\" fi 2.9 Function #!/bin/bash fun1(){ echo \"the name of command is $0\" echo \"the first params is $1\" echo \"the num of params is $#\" echo \"the str of params is $*\" } fun1 1 2 3 4 str exit 0 MacBook-Pro-3:shell sunquan$ funcDemo the name of command is /Users/sunquan/Library/shell/funcDemo the first params is 1 the num of params is 5 the str of params is 1 2 3 4 str 2.10 Import #!/bin/bash # this is first script . secondScriptName \u4e09.Shell\u811a\u672c\u5b9e\u8df5 3.1 \u5907\u5fd8\u5f55 #!/bin/bash # file name: remember # func : remember the note rememberfile=\"$HOME/.remember_work\" if [ $# -eq 0 ] ; then echo \"Enter note, end with ^D\" cat - >> $rememberfile else echo \"$@\" >> $rememberfile fi exit 0 #!/bin/bash # remind note rememberfile=\"$HOME/.remember_work\" if [ ! -f $rememberfile ] then echo \"$0: .remember not exist.\" >$2 exit 1 fi if [ $# -eq 0 ] then more $rememberfile else grep -i \"$@\" $rememberfile | more fi exit 0 3.2 \u5bfc\u822a #!/bin/bash if [ $# -le 0 ] ; then open https://baidu.com elif [ $1 == 'mail' ] ; then open mail.163.com ... fi Shell \u8fd8\u6709\u5f88\u591a\u7528\u6cd5\uff0c\u5c31\u5982\u540c 4.Motivation Example \u4e2d\uff0c\u7535\u8111\u91cc\u81f3\u5c11\u6709\u4e0a\u5343\u4e2a\u53ef\u6267\u884c\u547d\u4ee4\uff0c\u5982\u540c\u4e50\u9ad8\uff0c\u7528\u8fd9\u4e9b\u547d\u4ee4\u5806\u51fa\u4f60\u60f3\u50cf\u4e2d\u7684\u79ef\u6728\u3002\u4f60\u53ef\u4ee5\u548c Git \uff0c awk \uff0c sed \uff0c ffmpeg \uff0c adb \uff0c gradle \u7b49\u7b49\u5f00\u53d1\u73af\u5883\u548c\u547d\u4ee4\u7ed3\u5408\u6765\u6253\u9020\u4f60\u7684\u5b8c\u7f8e\u5f00\u53d1\u73af\u5883\u3002","title":"\u6df1\u5165\u7406\u89e3Shell\u811a\u672c"},{"location":"linux/shell/#shell","text":"","title":"\u4e00.Shell\u80cc\u666f"},{"location":"linux/shell/#11-gnu","text":"The GNU Project is a free software, mass collaboration project that Richard Stallman announced on September 27, 1983. Its goal is to give computer users freedom and control in their use of their computers and computing devices by collaboratively developing and publishing software that gives everyone the rights to freely run the software, copy and distribute it, study it, and modify it. GNU software grants these rights in its license. 1984\u5e74\uff0c\u53f2\u6258\u66fc\u5f00\u59cb GNU \u8ba1\u5212\uff0c \u8fd9\u4e2a\u8ba1\u5212\u7684\u76ee\u7684\u662f:\u521b\u5efa\u4e00\u4e2a\u81ea\u7531\u3001\u5f00\u653e\u7684Unix\u64cd\u4f5c\u7cfb\u7edf (Free Unix)\u3002 GNU's not Unix! GNU\u5e76\u4e0d\u662f Unix\u554a!\u90a3\u4e48GNU\u53c8\u662f\u4ec0\u4e48\u5462? \u5c31\u662fGNU's Not Unix\u561b!.....\u53ef\u662f\u65e0\u7a77\u5faa\u73af\u554a!\u5fd9\u788c~ \u672c\u7ae0\u6240\u8bf4\u7684Bash Shell\u5c31\u662f\u6765\u6e90\u4e8eGNU\uff0c\u8fd8\u6709\u4e00\u4e9b\u6bd4\u8f83\u8457\u540d\u7684\u8f6f\u4ef6\u6765\u6e90\u4e8eGNU\uff1a Emacs GNU C (GCC) GNU C Library (glibc) Bash shell In 1991, the Linux kernel appeared, developed outside the GNU project by Linus Torvalds, and in December 1992 it was made available under version 2 of the GNU General Public License. Combined with the operating system utilities already developed by the GNU project, it allowed for the first operating system that was free software, commonly known as Linux.","title":"1.1 GNU\u8ba1\u5212"},{"location":"linux/shell/#12-shell","text":"\u6211\u4eec\u5fc5\u987b\u8981\u901a\u8fc7\u201c Shell \u201d\u5c06\u6211\u4eec\u8f93\u5165\u7684\u6307\u4ee4\u4e0e Kernel \u6c9f\u901a\uff0c \u597d\u8ba9 Kernel \u53ef\u4ee5\u63a7\u5236\u786c\u4ef6\u6765\u6b63\u786e\u65e0\u8bef\u7684\u5de5\u4f5c\u3002 \u53ef\u4ee5\u53d1\u73b0\u5e94\u7528\u7a0b\u5e8f\u5176\u5b9e\u662f\u5728\u6700\u5916\u5c42\uff0c\u5982\u540c\u9e21\u86cb\u5916\u58f3\u4e00\u6837\uff0c\u56e0\u6b64\u5c31\u88ab\u79f0\u547c\u4e3a\u58f3\u7a0b\u5e8f (shell) \u5570! \u72ed\u4e49\uff1a\u547d\u4ee4\u884c\u65b9\u9762\u7684\u8f6f\u4ef6\uff0c bash \u7b49\u3002 \u5e7f\u4e49\uff1a\u56fe\u5f62\u63a5\u53e3\u7684\u8f6f\u4ef6!\u56e0\u4e3a\u56fe\u5f62\u63a5\u53e3\u5176\u5b9e\u4e5f\u80fd\u591f\u64cd\u4f5c\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u6765\u8c03\u7528\u6838\u5fc3\u5de5\u4f5c\u554a! Shell \u6709\u5f88\u591a\u7248\u672c\u4f8b\u5982\u5e38\u542c\u5230\u7684 Bourne SHell (sh) \u3001\u5728 Sun \u91cc\u5934\u9ed8\u8ba4\u7684 C SHell \uff0c\u8fd8\u6709 TCSH \uff0c zsh \u7b49\u7b49\uff0c\u6bcf\u4e00\u79cd Shell \u90fd\u5404\u6709\u5176\u7279\u70b9\u3002 Bash Shell \u662f Bourne Shell \u7684\u589e\u5f3a\u7248\u672c\uff0c\u4e5f\u662f\u57fa\u51c6\u4e8e GNU \u7684\u67b6\u6784\u4e0b\u53d1\u5c55\u51fa\u6765\u7684! \u5728\u4f60\u7684Mac\u7535\u8111\u4e2d\u6709\u591a\u5c11\u53ef\u4f7f\u7528\u7684 Shells \u5462\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\uff1a MacBook-Pro-3:~ sunquan$ cat -n /etc/shells 1 # List of acceptable shells for chpass(1). 2 # Ftpd will not allow users to connect who are not using 3 # one of these shells. 4 5 /bin/bash 6 /bin/csh 7 /bin/dash 8 /bin/ksh 9 /bin/sh 10 /bin/tcsh 11 /bin/zsh MacBook-Pro-3:~ sunquan$","title":"1.2 Shell"},{"location":"linux/shell/#13-bash","text":"\u800c\u5f53\u4e0b\u65e5\u5e38\u5927\u591a\u6570\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f Bash Shell \u3002\u6211\u4eec\u53ef\u4ee5\u5728\u7535\u8111\u4e2d man bash \u4e00\u4e0b MacBook-Pro-3:~ sunquan$ man bash BASH(1) BASH(1) NAME bash - GNU Bourne-Again SHell SYNOPSIS bash [options] [file] COPYRIGHT Bash is Copyright (C) 1989-2005 by the Free Software Foundation, Inc. DESCRIPTION Bash is an sh-compatible command language interpreter that executes commands read from the standard input or from a file. Bash also incor- porates useful features from the Korn and C shells (ksh and csh). Bash is intended to be a conformant implementation of the Shell and Utilities portion of the IEEE POSIX specification (IEEE Standard 1003.1). Bash can be configured to be POSIX-conformant by default. Bash is a Unix shell and command language written by Brian Fox for the GNU Project as a free software replacement for the Bourne shell. First released in 1989, it has been used as the default login shell for most Linux distributions. \u65e9\u57281989\u5e74\u5c31\u53d1\u5e03\u4e86 Bash \uff0c\u88ab\u7528\u6765\u64cd\u4f5c\u64cd\u4f5c\u7cfb\u7edf\u7684\u57fa\u672c\u63a5\u53e3\u3002\u90a3 Bash \u6709\u54ea\u4e9b\u4f18\u70b9\u5462\uff1a 1.\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55\u529f\u80fd \u7528\u6237\u53ef\u4ee5\u5728\u547d\u4ee4\u7ec8\u7aef\u4e2d\u901a\u8fc7\u4e0a\u4e0b\u7bad\u5934\u952e\u6765\u5207\u6362\u5386\u53f2\u4f7f\u7528\u7684\u547d\u4ee4\uff0c\u5728 ~/.bash_history \u91cc\u8bb0\u5f55\u4e86\u4f7f\u7528\u8fc7\u7684 bash \u547d\u4ee4 MacBook-Pro-3:~ sunquan$ tail -n 10 ~/.bash_history vim awkDemo2 diff awkDemo awkDemo2 eixt (0) | echo $? eixt (0) ; echo $? var = sq ; echo $var var=sq;echo $var exit 0;echo $var 2.\u547d\u4ee4\u8865\u5168\u529f\u80fd \u901a\u8fc7Tab\u952e\u53ef\u8fdb\u884c\u547d\u4ee4\u8865\u5168\u548c\u6587\u4ef6\u8865\u5168 3.alase \u522b\u540d\u8bbe\u7f6e MacBook-Pro-3:~ sunquan$ ls -l total 32 drwx------@ 6 sunquan staff 192 5 27 2020 Applications ... MacBook-Pro-3:~ sunquan$ alias ll='ls -l' MacBook-Pro-3:~ sunquan$ ll total 32 drwx------@ 6 sunquan staff 192 5 27 2020 Applications MacBook-Pro-3:~ sunquan$ 4.\u7a0b\u5e8f\u5316\u811a\u672c: (shell scripts) \u53ef\u901a\u8fc7\u5199shell\u811a\u672c\uff0c\u6c47\u96c6\u547d\u4ee4\u6784\u5efa\u66f4\u591a\u7684\u529f\u80fd","title":"1.3 Bash"},{"location":"linux/shell/#shell_1","text":"","title":"\u4e8c. Shell\u811a\u672c\u57fa\u672c\u8bed\u6cd5"},{"location":"linux/shell/#21-getting-start","text":"","title":"2.1 Getting Start"},{"location":"linux/shell/#1-introduction","text":"shell script \u662f\u5229\u7528 shell \u7684\u529f\u80fd\u6240\u5199\u7684\u4e00\u4e2a\u201c\u7a0b\u5e8f (program)\u201d\uff0c\u8fd9\u4e2a\u7a0b\u5e8f\u662f\u4f7f\u7528\u7eaf\u6587\u672c\u6587\u4ef6\u3002\u4e5f\u53ef\u88ab\u770b\u6210\u6279\u5904\u7406\u6587\u4ef6\u6216\u4e00\u4e2a\u7a0b\u5e8f\u8bed\u8a00\uff0c\u4e14\u7531\u4e8e\u90fd\u662f\u5229\u7528 shell \u4e0e\u76f8\u5173\u5de5\u5177\u6307\u4ee4\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u7f16\u8bd1\u5373\u53ef\u6267\u884c\u3002","title":"1. Introduction"},{"location":"linux/shell/#2-setting-up-workspace","text":"MacBook-Pro-3:~ sunquan$ vim ~/.bash_profile export HISTFILESIZE=1024 #\u8bbe\u7f6ehistory\u8bb0\u5f55bash\u547d\u4ee4\u7684\u5927\u5c0f export PATH=${PATH}:/Users/sunquan/Library/shell #shell\u5de5\u4f5c\u7a7a\u95f4 export PATH=${PATH}:/usr/local/bin export PATH=$PATH:/Users/sunquan/Library/Android/android-ndk-r18b/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/ export WORKON_HOME=$HOME/.virtualenvs export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python3 source /Library/Frameworks/Python.framework/Versions/3.7/bin/virtualenvwrapper.sh # Setting PATH for Python 3.7 # The original version is saved in .bash_profile.pysave PATH=\"/Library/Frameworks/Python.framework/Versions/3.7/bin:${PATH}\" export PATH MacBook-Pro-3:~ sunquan$ source ~/.bash_profile \u6211\u81ea\u5df1\u7684shell\u811a\u672c\u5b58\u653e\u5728 /Users/sunquan/Library/shell \u4e0b\uff0c\u914d\u7f6e\u5230\u7cfb\u7edf\u7684PATH\u91cc\uff0c\u5f53\u4f7f\u7528\u65f6\u811a\u672c\u547d\u4ee4\u65f6\uff0c\u7cfb\u7edf\u53ef\u81ea\u52a8\u5728\u8be5\u76ee\u5f55\u4e0b\u627e\u5230\u76f8\u5173\u547d\u4ee4\u5e76\u6267\u884c\u3002","title":"2. Setting up Workspace"},{"location":"linux/shell/#3-hello-world","text":"#! /bin/bash # author: scott sun # #!\u662f\u4e00\u4e2a\u7ea6\u5b9a\u7684\u6807\u8bb0\uff0c\u544a\u8bc9\u811a\u672c\u7528\u4ec0\u4e48shell\u73af\u5883\u6765\u6267\u884c # a program to show \"hello world\" in your screen # how to run : switch the dir # chmod +x helloworld # ./helloworld; if your add the scripts dir in your PATH variable, you can run helloworld directly echo \"Hello World\" exit 0 \u7b2c\u4e00\u884c #!/bin/bash \u5ba3\u544a\u8fd9\u4e2ascript\u4f7f\u7528\u7684 shell \u540d\u79f0\uff0c\u5fc5\u987b\u8981\u5305\u542b\u3002\u5f53\u8fd9\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u7684\u4ee5\u540e\uff0c\u5c31\u80fd\u591f\u8f7d\u5165bash\u7684\u76f8\u5173\u73af\u5883\u914d\u7f6e\u6587\u4ef6\u3002 \u4e00\u4e2a\u6307\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u53ef\u4ee5\u4f7f\u7528 $? \u8fd9\u4e2a\u53d8\u91cf\u6765\u89c2\u5bdf\u3002\u56e0\u6b64 exit 0 \u4ee3\u8868\u79bb\u5f00 script \u540e\u56de\u4f20\u4e00\u4e2a 0 \u7ed9\u7cfb\u7edf\u3002\u968f\u540e\u5982\u679c\u4e0b\u8fbe echo $? \u5219\u53ef\u5f97\u52300\u7684\u503c","title":"3. Hello World"},{"location":"linux/shell/#4-motivation-example","text":"#!/bin/bash #author : scott sun #function: use to count how much commands in your computer. IFS=\":\" count=0; nonex=0 for directory in $PATH ; do if [ -d \"$directory\" ] then for command in \"$directory\"/* ; do if [ -x \"$command\" ] then count=$[count + 1] else nonex=$[nonex + 1] fi done fi done echo \"$count commands, and $nonex that weren't executable\" exit 0 MacBook-Pro-3:shell sunquan$ countShellCommands 2438 commands, and 14 that weren't executable MacBook-Pro-3:shell sunquan$","title":"4. Motivation Example"},{"location":"linux/shell/#22-variable","text":"\u5b9a\u4e49\u53d8\u91cf\uff1a myname=\"sq\" \u53d8\u91cf\u540d\u4e0d\u80fd\u6709\u7a7a\u683c \u82f1\u6587\u5b57\u6bcd\uff0c\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\uff0c\u4e0d\u80fd\u4f7f\u7528 bash \u5173\u952e\u5b57 \u4f7f\u7528\u53d8\u91cf myname=\"sq\" echo $myname echo ${myname} echo \"my name is ${myname}\"","title":"2.2 Variable"},{"location":"linux/shell/#23-data-type","text":"#!/bin/bash vint=1 vint2=2 vfloat=1.1 vString=\"sq\" echo \"int add int is $[ vint + vint2 ]\" echo \"int add float is $[ vint + vfloat ]\" echo \"int add string $[ vint + vString ]\" MacBook-Pro-3:shell sunquan$ variableDemo int add int is 3 /Users/sunquan/Library/shell/variableDemo: line 8: 1.1: syntax error: invalid arithmetic operator (error token is \".1\") int add string 1 MacBook-Pro-3:shell sunquan$ 1. shell\u6ca1\u6709\u660e\u786e\u7684\u5173\u952e\u5b57\u5b9a\u4e49\u6570\u636e\u7c7b\u578b 2. \u76f8\u540c\u7c7b\u578b\u7684\u53ef\u76f8\u52a0\uff0c\u5426\u5219\u62a5\u9519 3. \u6574\u5f62\u548c\u5b57\u7b26\u4e32\u4e0d\u80fd\u76f8\u52a0","title":"2.3 Data Type"},{"location":"linux/shell/#24-string","text":"#!/bin/bash myname=\"scott.sun\" echo \"hello my name is $myname\" echo 'hello, my name is $myname' echo \"the length of $myname is ${#myname}\" echo \"substring(1,3) is ${myname:1:3}\" echo \"the first name is \"; eval \"echo $myname | cut -c1-5\" \u5355\u5f15\u53f7\u539f\u6837\u8f93\u51fa\uff0c\u53cc\u5f15\u53f7\u53ef\u663e\u793a\u53d8\u91cf ${#string} \u8f93\u51fa\u5b57\u7b26\u4e32\u957f\u5ea6 ${string:start:end} \u622a\u53d6\u5b57\u7b26\u4e32","title":"2.4 String"},{"location":"linux/shell/#25-array","text":"#!/bin/bash array=( 1 2 3 4 5 ) echo $array echo ${array[0]} echo ${array[5]} echo \"the length of arr is ${#array[*]}\" echo \"the content of array is ${array[*]}\" echo \"the content of array is ${array[@]}\" MacBook-Pro-3:shell sunquan$ arrayDemo 1 1 the length of arr is 5 the content of array is 1 2 3 4 5 the content of array is 1 2 3 4 5 ${array[*]} , ${array[@]) \u529f\u80fd\u96f7\u540c","title":"2.5 Array"},{"location":"linux/shell/#26-conditional-statements","text":"","title":"2.6 Conditional Statements"},{"location":"linux/shell/#1-if-else","text":"if [ -x \"/path/filename\" ] then echo \"this file can execute\" else echo \"this file can't execute\" fi","title":"1. if else"},{"location":"linux/shell/#2-switch-case","text":"#!/bin/bash echo \"input the num between 1-4\" read num case $num in 1) echo \"the num is 1\" ;; 2) echo \"the num is 2\" ;; 3) echo \"the num is 3\" ;; 4) echo \"the num is 4\" ;; *) echo \"the num is out of 1-4\" ;; esac","title":"2. switch case"},{"location":"linux/shell/#27-looping","text":"","title":"2.7 Looping"},{"location":"linux/shell/#1-while","text":"#!/bin/bash cnt=1 while(( $cnt<=5 )) do echo $cnt let \"cnt++\" done let \u7528\u4e8e\u6267\u884c\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8868\u8fbe\u5f0f\u4e0d\u9700\u8981 $ \u7b26\u53f7","title":"1. while"},{"location":"linux/shell/#2-for","text":"#!/bin/bash for loop in 1 2 3 4 5 do echo \"The value is $loop\" done","title":"2. for"},{"location":"linux/shell/#3","text":"for (( ; ; ))","title":"3. \u65e0\u9650\u5faa\u73af"},{"location":"linux/shell/#28","text":"# + - * / % # == != -eq -ne -gt -lt -ge -le # ! -o -a (\u975e\u6216\u4e0e\uff09 # -z \u5b57\u7b26\u4e32\u957f\u5ea6\u662f\u5426\u4e3a0 # -n \u5b57\u7b26\u4e32\u957f\u5ea6\u662f\u5426\u90e8\u4f4d0 # $ \u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u7a7a echo $[ 1 + 2 ] # -r -w -f -d -x -e # \u53ef\u8bfb\uff0c \u53ef\u5199 \u666e\u901a\u6587\u4ef6 \u662f\u5426\u76ee\u5f55 \u662f\u5426\u53ef\u6267\u884c \u662f\u5426\u5b58\u5728 if [ -r $file ] then echo \"\u6587\u4ef6\u53ef\u8bfb\" else echo \"\u6587\u4ef6\u4e0d\u53ef\u8bfb\" fi","title":"2.8 \u57fa\u672c\u8fd0\u7b97"},{"location":"linux/shell/#29-function","text":"#!/bin/bash fun1(){ echo \"the name of command is $0\" echo \"the first params is $1\" echo \"the num of params is $#\" echo \"the str of params is $*\" } fun1 1 2 3 4 str exit 0 MacBook-Pro-3:shell sunquan$ funcDemo the name of command is /Users/sunquan/Library/shell/funcDemo the first params is 1 the num of params is 5 the str of params is 1 2 3 4 str","title":"2.9 Function"},{"location":"linux/shell/#210-import","text":"#!/bin/bash # this is first script . secondScriptName","title":"2.10 Import"},{"location":"linux/shell/#shell_2","text":"","title":"\u4e09.Shell\u811a\u672c\u5b9e\u8df5"},{"location":"linux/shell/#31","text":"#!/bin/bash # file name: remember # func : remember the note rememberfile=\"$HOME/.remember_work\" if [ $# -eq 0 ] ; then echo \"Enter note, end with ^D\" cat - >> $rememberfile else echo \"$@\" >> $rememberfile fi exit 0 #!/bin/bash # remind note rememberfile=\"$HOME/.remember_work\" if [ ! -f $rememberfile ] then echo \"$0: .remember not exist.\" >$2 exit 1 fi if [ $# -eq 0 ] then more $rememberfile else grep -i \"$@\" $rememberfile | more fi exit 0","title":"3.1 \u5907\u5fd8\u5f55"},{"location":"linux/shell/#32","text":"#!/bin/bash if [ $# -le 0 ] ; then open https://baidu.com elif [ $1 == 'mail' ] ; then open mail.163.com ... fi Shell \u8fd8\u6709\u5f88\u591a\u7528\u6cd5\uff0c\u5c31\u5982\u540c 4.Motivation Example \u4e2d\uff0c\u7535\u8111\u91cc\u81f3\u5c11\u6709\u4e0a\u5343\u4e2a\u53ef\u6267\u884c\u547d\u4ee4\uff0c\u5982\u540c\u4e50\u9ad8\uff0c\u7528\u8fd9\u4e9b\u547d\u4ee4\u5806\u51fa\u4f60\u60f3\u50cf\u4e2d\u7684\u79ef\u6728\u3002\u4f60\u53ef\u4ee5\u548c Git \uff0c awk \uff0c sed \uff0c ffmpeg \uff0c adb \uff0c gradle \u7b49\u7b49\u5f00\u53d1\u73af\u5883\u548c\u547d\u4ee4\u7ed3\u5408\u6765\u6253\u9020\u4f60\u7684\u5b8c\u7f8e\u5f00\u53d1\u73af\u5883\u3002","title":"3.2 \u5bfc\u822a"},{"location":"linux/vim/","text":"\u6df1\u5165\u7406\u89e3Vim \u7b80\u4ecb \u7814\u53d1\u4eba\u5458\u5fc5\u5907\u5229\u5668\u4e4b\u6587\u672c\u7f16\u8f91\u5668vim\u3002\u6211\u4eec\u6765 man vi or man vim \u3002 NAME vim - Vi IMproved, a programmer's text editor SYNOPSIS vim [options] [file ..] vim [options] - vim [options] -t tag vim [options] -q [errorfile] ex view gvim gview evim eview rvim rview rgvim rgview DESCRIPTION Vim is a text editor that is upwards compatible to Vi. It can be used to edit all kinds of plain text. It is especially useful for editing programs. There are a lot of enhancements above Vi: multi level undo, multi windows and buffers, syn- tax highlighting, command line editing, filename completion, on-line help, visual selection, etc.. See \":help vi_diff.txt\" for a summary of the differences between Vim and Vi. 1. \u5728\u6240\u6709Linux distributions\u4e0a\u90fd\u4f1a\u6709\u4e00\u5957\u6587\u672c\u7f16\u8f91\u5668vi 2. vim\u662fvi\u7684\u8fdb\u9636\u7248\uff0c\u4e0d\u4f46\u53ef\u4ee5\u7528\u4e0d\u540c\u989c\u8272\u663e\u793a\u6587\u5b57\u5185\u5bb9\uff0c\u8fd8\u80fd\u8fdb\u884c\u8bf8\u5982shell script, C program\u7b49\u7a0b\u5e8f\u7f16\u8f91\u3002 Vim \u4f7f\u7528 vim\u5206\u4e3a\u5982\u4e0b\u4e09\u79cd\u8fd0\u884c\u6a21\u5f0f\uff1a 1.\u4e00\u822c\u666e\u901a\u6a21\u5f0f(Command Mode) \u9ed8\u8ba4\u6a21\u5f0f\uff0c\u53ef\u4ee5\u6309\u7167\u56fe\u4e2d\u7684\u64cd\u4f5c\u6765\u5207\u6362\u76f8\u5e94\u7684\u6a21\u5f0f\u3002\u8be5\u6a21\u5f0f\u4e0b\u53ef\u4f7f\u7528 \u4e0a\u4e0b\u5de6\u53f3 \u6309\u952e\u6765\u79fb\u52a8\u5149\u6807\uff0c\u4e5f\u53ef\u4f7f\u7528 \u5220\u9664\u5b57\u7b26 \u6216 \u5220\u9664\u6574\u5217 \u6765\u5904\u7406\u6587\u4ef6\u5185\u5bb9\uff0c \u4e5f\u53ef\u590d\u5236\u7c98\u8d34\u6765\u5904\u7406\u6587\u4ef6\u6570\u636e\u3002 2.\u547d\u4ee4\u884c\u6a21\u5f0f(Command-Line Mode) \u5728\u4e00\u822c\u666e\u901a\u5f53\u4e2d\uff0c\u8f93\u5165 : / ? \u4e09\u4e2a\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u6309\u94ae\uff0c\u5c31\u53ef\u4ee5\u5c06\u5149\u6807\u79fb\u52a8\u5230\u6700\u4e0b\u9762\u90a3\u4e00\u5217\u3002\u5728 \u8fd9\u4e2a\u6a21\u5f0f\u5f53\u4e2d\uff0c \u53ef\u4ee5\u63d0\u4f9b\u4f60 \u641c\u5bfb\u6570\u636e \u7684\u52a8\u4f5c\uff0c\u800c\u8bfb\u53d6\u3001\u5b58\u76d8\u3001\u5927\u91cf\u53d6\u4ee3\u5b57\u7b26\u3001\u79bb\u5f00 vi \u3001\u663e \u793a\u884c\u53f7\u7b49\u7b49\u7684\u52a8\u4f5c\u5219\u662f\u5728\u6b64\u6a21\u5f0f\u4e2d\u8fbe\u6210\u7684\uff0c\u5177\u4f53\u53ef\u53c2\u8003\u4e4b\u540e\u5feb\u6377\u952e\u4f7f\u7528\u90e8\u5206\u3002 3.\u63d2\u5165\u6a21\u5f0f(Insert Mode) \u5207\u6362\u5230\u63d2\u5165\u6a21\u5f0f\u540e\uff0c\u5728\u753b\u9762\u7684\u5de6\u4e0b\u65b9\u4f1a\u51fa\u73b0 INSERT \u6216 REPLACE \u7684\u5b57Z\uff0c\u6b64\u65f6\u624d\u53ef\u4ee5\u8fdb\u884c\u7f16\u8f91\u3002 Vim\u5feb\u6377\u952e\u5b9e\u8df5\u5927\u5168 Vim\u6838\u5fc3\u638c\u63e1\u6377\u5f84\u662f\u4e0d\u65ad\u4f7f\u7528\u5feb\u6377\u952e\u8fdb\u884c\u5b9e\u8df5\u64cd\u4f5c \u2190 \u2193\u2191 \u2192 \u4e0a\u4e0b\u5de6\u53f3 gg \u79fb\u5230\u7b2c\u4e00\u884c G \u79fb\u5230\u6587\u672b nG(2G, 10G) \u79fb\u5230\u5bf9\u5e94\u884c 0 \u79fb\u5230\u884c\u9996 $ \u79fb\u5230\u884c\u672b b \u4e0a\u4e2a\u5355\u8bcd\u5f00\u5934 e \u5f53\u524d\u5355\u8bcd\u5c3e x \u540e\u5220 X \u524d\u5220 dd \u5220\u9664\u5f53\u524d\u884c dj \u5220\u9664\u4e0b\u4e00\u884c D \u5220\u5230\u884c\u672b d^ \u5220\u5230\u884c\u9996 dG \u5220\u5230\u6587\u672b d1G \u5220\u5230\u6587\u9996 u \u64a4\u9500 Ctrl + r redo yy \u590d\u5236 p \u7c98\u8d34 y^ \u590d\u5236\u5230\u884c\u9996 y$ \u590d\u5236\u5230\u884c\u5c3e yG \u590d\u5236\u5230\u6587\u672b y1G \u590d\u5236\u5230\u6587\u9996 ?str \u641c\u7d22 n \u5411\u4e0a\u627e N \u5411\u4e0b\u627e :wq \u9000\u51fa\u4fdd\u5b58 :ce \u5c45\u4e2d :ri \u5c45\u53f3 :le \u5c45\u5de6 :wq! \u5f3a\u5236 \u4ee5\u4e0a\u90fd\u662f\u5728\u666e\u901a\u6a21\u5f0f\u4e0b\u8fdb\u884c\u64cd\u4f5c Vim\u914d\u7f6e git clone --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime sh ~/.vim_runtime/install_awesome_vimrc.sh \u4e00\u952e\u64cd\u4f5c\u5982\u4e0a\u547d\u4ee4\uff0c\u60f3\u8be6\u7ec6\u4e86\u89e3\u5177\u4f53\u7ec6\u8282\u8bf7\u8d70 \u4f20\u9001\u95e8 \uff0c\u914d\u7f6e\u5b8c\u6210\u540evim\u5982\u4e0b\u6240\u793a","title":"\u6df1\u5165\u7406\u89e3Vim"},{"location":"linux/vim/#_1","text":"\u7814\u53d1\u4eba\u5458\u5fc5\u5907\u5229\u5668\u4e4b\u6587\u672c\u7f16\u8f91\u5668vim\u3002\u6211\u4eec\u6765 man vi or man vim \u3002 NAME vim - Vi IMproved, a programmer's text editor SYNOPSIS vim [options] [file ..] vim [options] - vim [options] -t tag vim [options] -q [errorfile] ex view gvim gview evim eview rvim rview rgvim rgview DESCRIPTION Vim is a text editor that is upwards compatible to Vi. It can be used to edit all kinds of plain text. It is especially useful for editing programs. There are a lot of enhancements above Vi: multi level undo, multi windows and buffers, syn- tax highlighting, command line editing, filename completion, on-line help, visual selection, etc.. See \":help vi_diff.txt\" for a summary of the differences between Vim and Vi. 1. \u5728\u6240\u6709Linux distributions\u4e0a\u90fd\u4f1a\u6709\u4e00\u5957\u6587\u672c\u7f16\u8f91\u5668vi 2. vim\u662fvi\u7684\u8fdb\u9636\u7248\uff0c\u4e0d\u4f46\u53ef\u4ee5\u7528\u4e0d\u540c\u989c\u8272\u663e\u793a\u6587\u5b57\u5185\u5bb9\uff0c\u8fd8\u80fd\u8fdb\u884c\u8bf8\u5982shell script, C program\u7b49\u7a0b\u5e8f\u7f16\u8f91\u3002","title":"\u7b80\u4ecb"},{"location":"linux/vim/#vim","text":"vim\u5206\u4e3a\u5982\u4e0b\u4e09\u79cd\u8fd0\u884c\u6a21\u5f0f\uff1a","title":"Vim \u4f7f\u7528"},{"location":"linux/vim/#1command-mode","text":"\u9ed8\u8ba4\u6a21\u5f0f\uff0c\u53ef\u4ee5\u6309\u7167\u56fe\u4e2d\u7684\u64cd\u4f5c\u6765\u5207\u6362\u76f8\u5e94\u7684\u6a21\u5f0f\u3002\u8be5\u6a21\u5f0f\u4e0b\u53ef\u4f7f\u7528 \u4e0a\u4e0b\u5de6\u53f3 \u6309\u952e\u6765\u79fb\u52a8\u5149\u6807\uff0c\u4e5f\u53ef\u4f7f\u7528 \u5220\u9664\u5b57\u7b26 \u6216 \u5220\u9664\u6574\u5217 \u6765\u5904\u7406\u6587\u4ef6\u5185\u5bb9\uff0c \u4e5f\u53ef\u590d\u5236\u7c98\u8d34\u6765\u5904\u7406\u6587\u4ef6\u6570\u636e\u3002","title":"1.\u4e00\u822c\u666e\u901a\u6a21\u5f0f(Command Mode)"},{"location":"linux/vim/#2command-line-mode","text":"\u5728\u4e00\u822c\u666e\u901a\u5f53\u4e2d\uff0c\u8f93\u5165 : / ? \u4e09\u4e2a\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u6309\u94ae\uff0c\u5c31\u53ef\u4ee5\u5c06\u5149\u6807\u79fb\u52a8\u5230\u6700\u4e0b\u9762\u90a3\u4e00\u5217\u3002\u5728 \u8fd9\u4e2a\u6a21\u5f0f\u5f53\u4e2d\uff0c \u53ef\u4ee5\u63d0\u4f9b\u4f60 \u641c\u5bfb\u6570\u636e \u7684\u52a8\u4f5c\uff0c\u800c\u8bfb\u53d6\u3001\u5b58\u76d8\u3001\u5927\u91cf\u53d6\u4ee3\u5b57\u7b26\u3001\u79bb\u5f00 vi \u3001\u663e \u793a\u884c\u53f7\u7b49\u7b49\u7684\u52a8\u4f5c\u5219\u662f\u5728\u6b64\u6a21\u5f0f\u4e2d\u8fbe\u6210\u7684\uff0c\u5177\u4f53\u53ef\u53c2\u8003\u4e4b\u540e\u5feb\u6377\u952e\u4f7f\u7528\u90e8\u5206\u3002","title":"2.\u547d\u4ee4\u884c\u6a21\u5f0f(Command-Line Mode)"},{"location":"linux/vim/#3insert-mode","text":"\u5207\u6362\u5230\u63d2\u5165\u6a21\u5f0f\u540e\uff0c\u5728\u753b\u9762\u7684\u5de6\u4e0b\u65b9\u4f1a\u51fa\u73b0 INSERT \u6216 REPLACE \u7684\u5b57Z\uff0c\u6b64\u65f6\u624d\u53ef\u4ee5\u8fdb\u884c\u7f16\u8f91\u3002","title":"3.\u63d2\u5165\u6a21\u5f0f(Insert Mode)"},{"location":"linux/vim/#vim_1","text":"Vim\u6838\u5fc3\u638c\u63e1\u6377\u5f84\u662f\u4e0d\u65ad\u4f7f\u7528\u5feb\u6377\u952e\u8fdb\u884c\u5b9e\u8df5\u64cd\u4f5c \u2190 \u2193\u2191 \u2192 \u4e0a\u4e0b\u5de6\u53f3 gg \u79fb\u5230\u7b2c\u4e00\u884c G \u79fb\u5230\u6587\u672b nG(2G, 10G) \u79fb\u5230\u5bf9\u5e94\u884c 0 \u79fb\u5230\u884c\u9996 $ \u79fb\u5230\u884c\u672b b \u4e0a\u4e2a\u5355\u8bcd\u5f00\u5934 e \u5f53\u524d\u5355\u8bcd\u5c3e x \u540e\u5220 X \u524d\u5220 dd \u5220\u9664\u5f53\u524d\u884c dj \u5220\u9664\u4e0b\u4e00\u884c D \u5220\u5230\u884c\u672b d^ \u5220\u5230\u884c\u9996 dG \u5220\u5230\u6587\u672b d1G \u5220\u5230\u6587\u9996 u \u64a4\u9500 Ctrl + r redo yy \u590d\u5236 p \u7c98\u8d34 y^ \u590d\u5236\u5230\u884c\u9996 y$ \u590d\u5236\u5230\u884c\u5c3e yG \u590d\u5236\u5230\u6587\u672b y1G \u590d\u5236\u5230\u6587\u9996 ?str \u641c\u7d22 n \u5411\u4e0a\u627e N \u5411\u4e0b\u627e :wq \u9000\u51fa\u4fdd\u5b58 :ce \u5c45\u4e2d :ri \u5c45\u53f3 :le \u5c45\u5de6 :wq! \u5f3a\u5236 \u4ee5\u4e0a\u90fd\u662f\u5728\u666e\u901a\u6a21\u5f0f\u4e0b\u8fdb\u884c\u64cd\u4f5c","title":"Vim\u5feb\u6377\u952e\u5b9e\u8df5\u5927\u5168"},{"location":"linux/vim/#vim_2","text":"git clone --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime sh ~/.vim_runtime/install_awesome_vimrc.sh \u4e00\u952e\u64cd\u4f5c\u5982\u4e0a\u547d\u4ee4\uff0c\u60f3\u8be6\u7ec6\u4e86\u89e3\u5177\u4f53\u7ec6\u8282\u8bf7\u8d70 \u4f20\u9001\u95e8 \uff0c\u914d\u7f6e\u5b8c\u6210\u540evim\u5982\u4e0b\u6240\u793a","title":"Vim\u914d\u7f6e"}]}